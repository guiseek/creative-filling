var mr=Object.defineProperty;var gr=(t,e,r)=>e in t?mr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var M=(t,e,r)=>gr(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();const Ft=t=>Object.values(t),vr=t=>new Promise(t),wr=t=>Promise.all(t),br=async(t,e)=>{const r=e.map(String).map(o=>{const a=`url(./fonts/${t}-${o}.woff2)`;return new FontFace(t,a,{weight:o,style:"normal"}).load()});return(await wr(r)).map(o=>document.fonts.add(o))},_r=t=>vr((e,r)=>{const o=new FileReader;o.addEventListener("error",()=>{const a="Error on load image of type";r(new DOMException(`${a}: ${t.type}`))}),o.addEventListener("loadend",()=>{typeof o.result=="string"&&e(o.result)}),o.readAsDataURL(t)}),xr=(t,e)=>t/e*100;class k{constructor(e=0,r=0){M(this,"isCollision",e=>{const r=e,o=new k(r.x,r.y),a=new k(e.w,e.h),l=o.add(a);return this.x>=r.x&&this.y>=r.y&&this.x<=l.x&&this.y<=l.y});this.x=e,this.y=r}set(e,r){this.x=e,this.y=r}clone(){return new k(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}}const Mr=t=>Object.fromEntries(new FormData(t).entries()),Or=t=>Object.entries(t),Q={string(t){return typeof t=="string"},number(t){return typeof t=="number"&&!isNaN(t)},date(t){return t instanceof Date&&t.toString()!=="Invalid Date"||!isNaN(new Date(String(t)).getTime())},boolean(t){return t===!0||t===!1||t==="true"||t==="false"},object(t){return typeof t=="object"&&t!==null},array(t){return Array.isArray(t)},function(t){return typeof t=="function"},class(t){return typeof t=="function"&&typeof t.prototype=="object"&&"constructor"in t.prototype}},Tr=t=>t==null?null:Q.boolean(t)?t==="true"||t===!0:Q.number(t)?t:typeof t=="string"&&Q.number(+t)?+t:Q.date(t)?new Date(t.toString()):(Q.string(t),t),Er=t=>Object.values(t),Lr=t=>{const e=t instanceof HTMLFormElement?Mr(t):t;return Or(e).reduce((r,[o,a])=>({...r,[o]:Tr(a)}),e)};function Hr(t,e=1e3){let r=new Date().getTime(),o,a;return l=>{const m=new Date().getTime();o=l,m-r>=e?(r=m,t(l)):(clearTimeout(a),a=window.setTimeout(()=>{r=new Date().getTime(),t(o)},e-(m-r)))}}const fe=new Map,jr=(t,e)=>{const r=Oe(t);return fe.set(t,r.add(e)),()=>{r.delete(e),fe.set(t,r)}},Oe=t=>fe.get(t)??new Set,R=t=>e=>jr(t,e);class Sr{constructor(e,r){M(this,"type");M(this,"value");this.type=e,this.value=r}}const I=t=>e=>new class extends Sr{constructor(){super(t,e)}dispatch(){for(const r of Oe(this.type))r(this.value)}},D=t=>{for(const e of Oe(t.type))e(t.value)},Ue=I("window.resize"),Pr=R("window.resize"),Dr=I("canvas.update.size"),Cr=R("canvas.update.size"),de=I("canvas.add.layer"),zr=R("canvas.add.layer"),p=(t,e)=>r=>{customElements.define(e,r,{extends:t})};var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Be;(function(t){(function(e){var r=typeof globalThis=="object"?globalThis:typeof Ne=="object"?Ne:typeof self=="object"?self:typeof this=="object"?this:P(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),e(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(W,B){return function(F,q){Object.defineProperty(W,F,{configurable:!0,writable:!0,value:q}),B&&B(F,q)}}function l(){try{return Function("return this;")()}catch{}}function m(){try{return(0,eval)("(function() { return this; })()")}catch{}}function P(){return l()||m()}})(function(e,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",l=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",m=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",P=typeof Object.create=="function",W={__proto__:[]}instanceof Array,B=!P&&!W,F={create:P?function(){return ce(Object.create(null))}:W?function(){return ce({__proto__:null})}:function(){return ce({})},has:B?function(n,s){return o.call(n,s)}:function(n,s){return s in n},get:B?function(n,s){return o.call(n,s)?n[s]:void 0}:function(n,s){return n[s]}},q=Object.getPrototypeOf(Function),Z=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:fr(),ne=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:dr(),se=typeof WeakMap=="function"?WeakMap:hr(),G=a?Symbol.for("@reflect-metadata:registry"):void 0,J=cr(),Ee=ur(J);function Nt(n,s,i,c){if(b(i)){if(!ke(n))throw new TypeError;if(!Re(s))throw new TypeError;return er(n,s)}else{if(!ke(n))throw new TypeError;if(!E(s))throw new TypeError;if(!E(c)&&!b(c)&&!U(c))throw new TypeError;return U(c)&&(c=void 0),i=z(i),tr(n,s,i,c)}}e("decorate",Nt);function Bt(n,s){function i(c,y){if(!E(c))throw new TypeError;if(!b(y)&&!ar(y))throw new TypeError;Se(n,s,c,y)}return i}e("metadata",Bt);function qt(n,s,i,c){if(!E(i))throw new TypeError;return b(c)||(c=z(c)),Se(n,s,i,c)}e("defineMetadata",qt);function Zt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),Le(n,s,i)}e("hasMetadata",Zt);function Vt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),ie(n,s,i)}e("hasOwnMetadata",Vt);function Qt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),He(n,s,i)}e("getMetadata",Qt);function Xt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),je(n,s,i)}e("getOwnMetadata",Xt);function Yt(n,s){if(!E(n))throw new TypeError;return b(s)||(s=z(s)),Pe(n,s)}e("getMetadataKeys",Yt);function Jt(n,s){if(!E(n))throw new TypeError;return b(s)||(s=z(s)),De(n,s)}e("getOwnMetadataKeys",Jt);function Kt(n,s,i){if(!E(s))throw new TypeError;if(b(i)||(i=z(i)),!E(s))throw new TypeError;b(i)||(i=z(i));var c=V(s,i,!1);return b(c)?!1:c.OrdinaryDeleteMetadata(n,s,i)}e("deleteMetadata",Kt);function er(n,s){for(var i=n.length-1;i>=0;--i){var c=n[i],y=c(s);if(!b(y)&&!U(y)){if(!Re(y))throw new TypeError;s=y}}return s}function tr(n,s,i,c){for(var y=n.length-1;y>=0;--y){var j=n[y],L=j(s,i,c);if(!b(L)&&!U(L)){if(!E(L))throw new TypeError;c=L}}return c}function Le(n,s,i){var c=ie(n,s,i);if(c)return!0;var y=oe(s);return U(y)?!1:Le(n,y,i)}function ie(n,s,i){var c=V(s,i,!1);return b(c)?!1:ze(c.OrdinaryHasOwnMetadata(n,s,i))}function He(n,s,i){var c=ie(n,s,i);if(c)return je(n,s,i);var y=oe(s);if(!U(y))return He(n,y,i)}function je(n,s,i){var c=V(s,i,!1);if(!b(c))return c.OrdinaryGetOwnMetadata(n,s,i)}function Se(n,s,i,c){var y=V(i,c,!0);y.OrdinaryDefineOwnMetadata(n,s,i,c)}function Pe(n,s){var i=De(n,s),c=oe(n);if(c===null)return i;var y=Pe(c,s);if(y.length<=0)return i;if(i.length<=0)return y;for(var j=new ne,L=[],_=0,u=i;_<u.length;_++){var f=u[_],d=j.has(f);d||(j.add(f),L.push(f))}for(var h=0,x=y;h<x.length;h++){var f=x[h],d=j.has(f);d||(j.add(f),L.push(f))}return L}function De(n,s){var i=V(n,s,!1);return i?i.OrdinaryOwnMetadataKeys(n,s):[]}function Ce(n){if(n===null)return 1;switch(typeof n){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return n===null?1:6;default:return 6}}function b(n){return n===void 0}function U(n){return n===null}function rr(n){return typeof n=="symbol"}function E(n){return typeof n=="object"?n!==null:typeof n=="function"}function nr(n,s){switch(Ce(n)){case 0:return n;case 1:return n;case 2:return n;case 3:return n;case 4:return n;case 5:return n}var i="string",c=Ie(n,l);if(c!==void 0){var y=c.call(n,i);if(E(y))throw new TypeError;return y}return sr(n)}function sr(n,s){var i,c;{var y=n.toString;if(K(y)){var c=y.call(n);if(!E(c))return c}var i=n.valueOf;if(K(i)){var c=i.call(n);if(!E(c))return c}}throw new TypeError}function ze(n){return!!n}function ir(n){return""+n}function z(n){var s=nr(n);return rr(s)?s:ir(s)}function ke(n){return Array.isArray?Array.isArray(n):n instanceof Object?n instanceof Array:Object.prototype.toString.call(n)==="[object Array]"}function K(n){return typeof n=="function"}function Re(n){return typeof n=="function"}function ar(n){switch(Ce(n)){case 3:return!0;case 4:return!0;default:return!1}}function ae(n,s){return n===s||n!==n&&s!==s}function Ie(n,s){var i=n[s];if(i!=null){if(!K(i))throw new TypeError;return i}}function Fe(n){var s=Ie(n,m);if(!K(s))throw new TypeError;var i=s.call(n);if(!E(i))throw new TypeError;return i}function Ae(n){return n.value}function $e(n){var s=n.next();return s.done?!1:s}function We(n){var s=n.return;s&&s.call(n)}function oe(n){var s=Object.getPrototypeOf(n);if(typeof n!="function"||n===q||s!==q)return s;var i=n.prototype,c=i&&Object.getPrototypeOf(i);if(c==null||c===Object.prototype)return s;var y=c.constructor;return typeof y!="function"||y===n?s:y}function or(){var n;!b(G)&&typeof r.Reflect<"u"&&!(G in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(n=lr(r.Reflect));var s,i,c,y=new se,j={registerProvider:L,getProvider:u,setProvider:d};return j;function L(h){if(!Object.isExtensible(j))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case n===h:break;case b(s):s=h;break;case s===h:break;case b(i):i=h;break;case i===h:break;default:c===void 0&&(c=new ne),c.add(h);break}}function _(h,x){if(!b(s)){if(s.isProviderFor(h,x))return s;if(!b(i)){if(i.isProviderFor(h,x))return s;if(!b(c))for(var O=Fe(c);;){var T=$e(O);if(!T)return;var C=Ae(T);if(C.isProviderFor(h,x))return We(O),C}}}if(!b(n)&&n.isProviderFor(h,x))return n}function u(h,x){var O=y.get(h),T;return b(O)||(T=O.get(x)),b(T)&&(T=_(h,x),b(T)||(b(O)&&(O=new Z,y.set(h,O)),O.set(x,T))),T}function f(h){if(b(h))throw new TypeError;return s===h||i===h||!b(c)&&c.has(h)}function d(h,x,O){if(!f(O))throw new Error("Metadata provider not registered.");var T=u(h,x);if(T!==O){if(!b(T))return!1;var C=y.get(h);b(C)&&(C=new Z,y.set(h,C)),C.set(x,O)}return!0}}function cr(){var n;return!b(G)&&E(r.Reflect)&&Object.isExtensible(r.Reflect)&&(n=r.Reflect[G]),b(n)&&(n=or()),!b(G)&&E(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,G,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}function ur(n){var s=new se,i={isProviderFor:function(f,d){var h=s.get(f);return b(h)?!1:h.has(d)},OrdinaryDefineOwnMetadata:L,OrdinaryHasOwnMetadata:y,OrdinaryGetOwnMetadata:j,OrdinaryOwnMetadataKeys:_,OrdinaryDeleteMetadata:u};return J.registerProvider(i),i;function c(f,d,h){var x=s.get(f),O=!1;if(b(x)){if(!h)return;x=new Z,s.set(f,x),O=!0}var T=x.get(d);if(b(T)){if(!h)return;if(T=new Z,x.set(d,T),!n.setProvider(f,d,i))throw x.delete(d),O&&s.delete(f),new Error("Wrong provider for target.")}return T}function y(f,d,h){var x=c(d,h,!1);return b(x)?!1:ze(x.has(f))}function j(f,d,h){var x=c(d,h,!1);if(!b(x))return x.get(f)}function L(f,d,h,x){var O=c(h,x,!0);O.set(f,d)}function _(f,d){var h=[],x=c(f,d,!1);if(b(x))return h;for(var O=x.keys(),T=Fe(O),C=0;;){var Ge=$e(T);if(!Ge)return h.length=C,h;var pr=Ae(Ge);try{h[C]=pr}catch(yr){try{We(T)}finally{throw yr}}C++}}function u(f,d,h){var x=c(d,h,!1);if(b(x)||!x.delete(f))return!1;if(x.size===0){var O=s.get(d);b(O)||(O.delete(h),O.size===0&&s.delete(O))}return!0}}function lr(n){var s=n.defineMetadata,i=n.hasOwnMetadata,c=n.getOwnMetadata,y=n.getOwnMetadataKeys,j=n.deleteMetadata,L=new se,_={isProviderFor:function(u,f){var d=L.get(u);return!b(d)&&d.has(f)?!0:y(u,f).length?(b(d)&&(d=new ne,L.set(u,d)),d.add(f),!0):!1},OrdinaryDefineOwnMetadata:s,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:y,OrdinaryDeleteMetadata:j};return _}function V(n,s,i){var c=J.getProvider(n,s);if(!b(c))return c;if(i){if(J.setProvider(n,s,Ee))return Ee;throw new Error("Illegal state.")}}function fr(){var n={},s=[],i=function(){function _(u,f,d){this._index=0,this._keys=u,this._values=f,this._selector=d}return _.prototype["@@iterator"]=function(){return this},_.prototype[m]=function(){return this},_.prototype.next=function(){var u=this._index;if(u>=0&&u<this._keys.length){var f=this._selector(this._keys[u],this._values[u]);return u+1>=this._keys.length?(this._index=-1,this._keys=s,this._values=s):this._index++,{value:f,done:!1}}return{value:void 0,done:!0}},_.prototype.throw=function(u){throw this._index>=0&&(this._index=-1,this._keys=s,this._values=s),u},_.prototype.return=function(u){return this._index>=0&&(this._index=-1,this._keys=s,this._values=s),{value:u,done:!0}},_}(),c=function(){function _(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(_.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_.prototype.has=function(u){return this._find(u,!1)>=0},_.prototype.get=function(u){var f=this._find(u,!1);return f>=0?this._values[f]:void 0},_.prototype.set=function(u,f){var d=this._find(u,!0);return this._values[d]=f,this},_.prototype.delete=function(u){var f=this._find(u,!1);if(f>=0){for(var d=this._keys.length,h=f+1;h<d;h++)this._keys[h-1]=this._keys[h],this._values[h-1]=this._values[h];return this._keys.length--,this._values.length--,ae(u,this._cacheKey)&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},_.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},_.prototype.keys=function(){return new i(this._keys,this._values,y)},_.prototype.values=function(){return new i(this._keys,this._values,j)},_.prototype.entries=function(){return new i(this._keys,this._values,L)},_.prototype["@@iterator"]=function(){return this.entries()},_.prototype[m]=function(){return this.entries()},_.prototype._find=function(u,f){if(!ae(this._cacheKey,u)){this._cacheIndex=-1;for(var d=0;d<this._keys.length;d++)if(ae(this._keys[d],u)){this._cacheIndex=d;break}}return this._cacheIndex<0&&f&&(this._cacheIndex=this._keys.length,this._keys.push(u),this._values.push(void 0)),this._cacheIndex},_}();return c;function y(_,u){return _}function j(_,u){return u}function L(_,u){return[_,u]}}function dr(){var n=function(){function s(){this._map=new Z}return Object.defineProperty(s.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),s.prototype.has=function(i){return this._map.has(i)},s.prototype.add=function(i){return this._map.set(i,i),this},s.prototype.delete=function(i){return this._map.delete(i)},s.prototype.clear=function(){this._map.clear()},s.prototype.keys=function(){return this._map.keys()},s.prototype.values=function(){return this._map.keys()},s.prototype.entries=function(){return this._map.entries()},s.prototype["@@iterator"]=function(){return this.keys()},s.prototype[m]=function(){return this.keys()},s}();return n}function hr(){var n=16,s=F.create(),i=c();return function(){function u(){this._key=c()}return u.prototype.has=function(f){var d=y(f,!1);return d!==void 0?F.has(d,this._key):!1},u.prototype.get=function(f){var d=y(f,!1);return d!==void 0?F.get(d,this._key):void 0},u.prototype.set=function(f,d){var h=y(f,!0);return h[this._key]=d,this},u.prototype.delete=function(f){var d=y(f,!1);return d!==void 0?delete d[this._key]:!1},u.prototype.clear=function(){this._key=c()},u}();function c(){var u;do u="@@WeakMap@@"+_();while(F.has(s,u));return s[u]=!0,u}function y(u,f){if(!o.call(u,i)){if(!f)return;Object.defineProperty(u,i,{value:F.create()})}return u[i]}function j(u,f){for(var d=0;d<f;++d)u[d]=Math.random()*255|0;return u}function L(u){if(typeof Uint8Array=="function"){var f=new Uint8Array(u);return typeof crypto<"u"?crypto.getRandomValues(f):typeof msCrypto<"u"?msCrypto.getRandomValues(f):j(f,u),f}return j(new Array(u),u)}function _(){var u=L(n);u[6]=u[6]&79|64,u[8]=u[8]&191|128;for(var f="",d=0;d<n;++d){var h=u[d];(d===4||d===6||d===8)&&(f+="-"),h<16&&(f+="0"),f+=h.toString(16).toLowerCase()}return f}}function ce(n){return n.__=void 0,delete n.__,n}})})(Be||(Be={}));function g(t,e){return Object.assign(t,e??{})}var At=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,$t=t=>{throw TypeError(t)},Rr=(t,e,r)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ir=(t,e,r,o)=>{for(var a=o>1?void 0:o?kr(e,r):e,l=t.length-1,m;l>=0;l--)(m=t[l])&&(a=(o?m(e,r,a):m(a))||a);return o&&a&&At(e,r,a),a},ee=(t,e,r)=>Rr(t,typeof e!="symbol"?e+"":e,r),Te=(t,e,r)=>e.has(t)||$t("Cannot "+r),H=(t,e,r)=>(Te(t,e,"read from private field"),r?r.call(t):e.get(t)),N=(t,e,r)=>e.has(t)?$t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ue=(t,e,r,o)=>(Te(t,e,"write to private field"),e.set(t,r),r),qe=(t,e,r)=>(Te(t,e,"access private method"),r),A,S,he,pe,te,ye,me;let ge=class extends HTMLCanvasElement{constructor(){super(),N(this,te),ee(this,"context"),N(this,A,[]),N(this,S,null),ee(this,"addLayer",t=>{t.setOrder(H(this,A).length),H(this,A).push(t)}),ee(this,"render",async()=>{this.context&&(this.context.clearRect(0,0,this.width,this.height),H(this,A).filter(t=>t.active).sort((t,e)=>t.order-e.order).map(async t=>{var l;if(!this.context)return;await t.render();const{width:e,height:r}=t,{x:o,y:a}=t.position;if((l=this.context)==null||l.drawImage(t,o,a,e,r),t.hovered){const m=new Path2D;m.rect(o,a,e,r),this.context.lineWidth=2,this.context.strokeStyle="rgba(255, 13, 233, 0.4)",this.context.stroke(m)}}))}),ee(this,"setSize",t=>{this.width=t,this.height=t}),N(this,he,({offsetX:t,offsetY:e})=>{const r=new k(t,e),o=H(this,A).filter(({rect:a})=>r.isCollision(a));if(o.length>0){const a=o.reduce((m,P)=>P.order>m.order?P:m,o[0]),l=qe(this,te,ye).call(this,a,r);l.x||l.y?(ue(this,S,a),a.startResize(l)):(ue(this,S,a),a.startDrag(r))}}),N(this,pe,t=>{const{offsetX:e,offsetY:r}=t,o=new k(e,r);if(H(this,S)&&H(this,S).dragging)H(this,S).dragTo(o),this.render();else if(H(this,S)&&H(this,S).resizable&&H(this,S).resizing)H(this,S).resizeTo(o),this.render();else{let a=null;for(const l of H(this,A))if(l.resizable&&o.isCollision(l.rect)){a=l;const m=qe(this,te,ye).call(this,l,o);m.x||m.y?this.style.cursor=m.x&&m.y?"nwse-resize":m.x?"ew-resize":"ns-resize":this.style.cursor="default"}else l.setHovered(!1);a&&a.setHovered(!0),this.render()}}),N(this,me,()=>{H(this,S)&&(H(this,S).resizing?H(this,S).stopResize():H(this,S).stopDrag(),ue(this,S,null),this.render().then())}),this.context=this.getContext("2d")}connectedCallback(){this.onmousedown=H(this,he),this.onmousemove=H(this,pe),this.onmouseup=H(this,me)}};A=new WeakMap;S=new WeakMap;he=new WeakMap;pe=new WeakMap;te=new WeakSet;ye=function(t,e){const o=t.rect;return{x:e.x>=o.x+o.w-10,y:e.y>=o.y+o.h-10}};me=new WeakMap;ge=Ir([p("canvas","cf-canvas")],ge);const X=new ge;zr(t=>{X.addLayer(t),X.render().then()});Cr(t=>{const e=Math.min(t.current.w,t.current.h),o=xr(e,t.ideal)>100?t.ideal:e;X.setSize(o),X.render().then()});Pr(t=>{const e=t<1080?540:1080,{clientWidth:r,clientHeight:o}=root;D(Dr({current:{w:r,h:o},ideal:e})),document.documentElement.style.setProperty("--cf-canvas-max-size",`${e}px`)});const Fr=I("layer.create.image"),Ar=R("layer.create.image"),$r=I("layer.create.text"),Wr=R("layer.create.text");class Wt extends OffscreenCanvas{constructor(r,o,a=0,l=0){super(r,o);M(this,"context");M(this,"_position",new k);M(this,"_offset",new k);M(this,"_draggable",!0);M(this,"_resizable",!0);M(this,"_dragging",!1);M(this,"_resizing",!1);M(this,"_aspectRatio");M(this,"_resizeDirection",{x:!1,y:!1});M(this,"_hovered",!1);M(this,"_active",!0);M(this,"_order",1);this._position=new k(a,l),this.context=this.getContext("2d"),this._aspectRatio=r/o}get position(){return this._position}get dragging(){return this._dragging}get resizing(){return this._resizing}get resizable(){return this._resizable}get hovered(){return this._hovered}get offset(){return this._offset}get active(){return this._active}get order(){return this._order}get rect(){return{x:this.position.x,y:this.position.y,w:this.width,h:this.height}}setActive(r){return this._active=r,this}setOrder(r){return this._order=r,this}setDraggable(r){return this._draggable=r,this}setDragging(r){return this._dragging=r,this}setHovered(r){return this._hovered=r,this}startDrag(r){this.setDragging(!0),this.offset.copy(r).sub(this.position)}dragTo(r){this.dragging&&this.position.copy(r).sub(this.offset)}stopDrag(){this.setDragging(!1)}setResizable(r){return this._resizable=r,this}setResizing(r){return this._resizing=r,this}startResize(r){this.setResizing(!0),this._resizeDirection=r}resizeTo(r){if(this._resizing){const{x:o,y:a}=this._resizeDirection;if(o&&a){const l=r.x-this.position.x,m=r.y-this.position.y,P=Math.max(l/this.width,m/this.height);this.width=this.width*P,this.height=this.height*P}else o?(this.width=Math.max(10,r.x-this.position.x),this.height=this.width/this._aspectRatio):a&&(this.height=Math.max(10,r.y-this.position.y),this.width=this.height*this._aspectRatio);this.render()}}stopResize(){this.setResizing(!1),this._resizeDirection={x:!1,y:!1}}}class Gr extends Wt{constructor(){super(...arguments);M(this,"image",new Image(this.width,this.height))}async render(){var a;if(!((a=this.context)!=null&&a.drawImage))return;this.context.clearRect(0,0,this.width,this.height),await this.image.decode();const{w:r,h:o}=this.rect;this.context.drawImage(this.image,0,0,r,o)}setSrc(r){return this.image.src=r,this}}Ar(t=>{const e=new Image;e.addEventListener("load",async()=>{const{width:r,height:o}=e,a=new Gr(r,o,0,0);a.image.src=t,await a.render(),D(de(a))}),e.src=t});class Ur extends Wt{constructor(){super(...arguments);M(this,"_text","");M(this,"_color","#111111");M(this,"_font","Mukta");M(this,"_size",3.2);M(this,"_weight","normal")}async render(){var o;if(!((o=this.context)!=null&&o.drawImage))return;this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=this._color,this.context.font=this.font;const r=this._size*10;this.context.fillText(this._text,0,r,this.width)}setText(r){return this._text=r,this}setColor(r){return this._color=r,this}setFont(r){return this._font=r,this}setSize(r){return this._size=r,this}setWeight(r){return this._weight=r,this}get font(){return`${this._weight} ${this._size}em ${this._font}`}}Wr(async({text:t,size:e,color:r,bold:o})=>{const a=new Ur(t.length*e*5,e*12,0,0);a.setText(t).setSize(e).setColor(r).setResizable(!1),o?(await a.setWeight("bold").render(),D(de(a))):(await a.render(),D(de(a)))});const Nr=I("toolbar.selected"),Br=R("toolbar.selected"),qr=I("toolbar.select.image"),Zr=R("toolbar.select.image"),Vr=I("toolbar.select.text"),Qr=R("toolbar.select.text");function v(t,e,r,o){var a=arguments.length,l=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,o);else for(var P=t.length-1;P>=0;P--)(m=t[P])&&(l=(a<3?m(l):a>3?m(e,r,l):m(e,r))||l);return a>3&&l&&Object.defineProperty(e,r,l),l}function w(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}let Ze=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Ze=v([p("address","web-address"),w("design:paramtypes",[Object])],Ze);let Ve=class extends HTMLAnchorElement{constructor(r={}){super();M(this,"target");M(this,"rel");g(this,r)}};Ve=v([p("a","web-anchor"),w("design:paramtypes",[Object])],Ve);let Qe=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Qe=v([p("article","web-article"),w("design:paramtypes",[Object])],Qe);let Xe=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Xe=v([p("aside","web-aside"),w("design:paramtypes",[Object])],Xe);let Ye=class extends HTMLBRElement{constructor(e={}){super(),g(this,e)}};Ye=v([p("br","web-break"),w("design:paramtypes",[Object])],Ye);let Y=class extends HTMLButtonElement{constructor(e={}){super(),g(this,e)}};Y=v([p("button","web-button"),w("design:paramtypes",[Object])],Y);let Je=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Je=v([p("cite","web-cite"),w("design:paramtypes",[Object])],Je);let Ke=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Ke=v([p("code","web-code"),w("design:paramtypes",[Object])],Ke);let et=class extends HTMLDataListElement{constructor(e={}){super(),g(this,e)}};et=v([p("datalist","web-data-list"),w("design:paramtypes",[Object])],et);let tt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};tt=v([p("dd","web-description-definition"),w("design:paramtypes",[Object])],tt);let rt=class extends HTMLDListElement{constructor(e={}){super(),g(this,e)}};rt=v([p("dl","web-description-list"),w("design:paramtypes",[Object])],rt);let nt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};nt=v([p("dt","web-description-term"),w("design:paramtypes",[Object])],nt);let st=class extends HTMLDivElement{constructor(e={}){super(),g(this,e)}};st=v([p("div","web-div"),w("design:paramtypes",[Object])],st);let it=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};it=v([p("em","web-emphasis"),w("design:paramtypes",[Object])],it);let at=class extends HTMLFieldSetElement{constructor(e={}){super(),g(this,e)}};at=v([p("fieldset","web-fieldset"),w("design:paramtypes",[Object])],at);let ot=class extends HTMLElement{};ot=v([p("figcaption","web-figcaption")],ot);let ct=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ct=v([p("figure","web-figure"),w("design:paramtypes",[Object])],ct);let ve=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ve=v([p("footer","web-footer"),w("design:paramtypes",[Object])],ve);let we=class extends HTMLFormElement{constructor(e={}){super(),g(this,e)}};we=v([p("form","web-form"),w("design:paramtypes",[Object])],we);let ut=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ut=v([p("header","web-header"),w("design:paramtypes",[Object])],ut);let lt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};lt=v([p("h1","web-h1"),w("design:paramtypes",[Object])],lt);let ft=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};ft=v([p("h2","web-h2"),w("design:paramtypes",[Object])],ft);let dt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};dt=v([p("h3","web-h3"),w("design:paramtypes",[Object])],dt);let ht=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};ht=v([p("h4","web-h4"),w("design:paramtypes",[Object])],ht);let pt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};pt=v([p("h5","web-h5"),w("design:paramtypes",[Object])],pt);let yt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};yt=v([p("h6","web-h6"),w("design:paramtypes",[Object])],yt);let mt=class extends HTMLHRElement{constructor(e={}){super(),g(this,e)}};mt=v([p("hr","web-horizontal-rule"),w("design:paramtypes",[Object])],mt);let $=class extends HTMLInputElement{constructor(e={}){super(),g(this,e)}};$=v([p("input","web-input"),w("design:paramtypes",[Object])],$);let gt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};gt=v([p("kbd","web-keyboard"),w("design:paramtypes",[Object])],gt);let vt=class extends HTMLLabelElement{constructor(e={}){super(),g(this,e)}};vt=v([p("label","web-label"),w("design:paramtypes",[Object])],vt);let wt=class extends HTMLLIElement{constructor(e={}){super(),g(this,e)}};wt=v([p("li","web-list-item"),w("design:paramtypes",[Object])],wt);let bt=class extends HTMLOListElement{constructor(e={}){super(),g(this,e)}};bt=v([p("ol","web-ordered-list"),w("design:paramtypes",[Object])],bt);let _t=class extends HTMLUListElement{constructor(e={}){super(),g(this,e)}};_t=v([p("ul","web-unordered-list"),w("design:paramtypes",[Object])],_t);let xt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};xt=v([p("main","web-main"),w("design:paramtypes",[Object])],xt);let Mt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Mt=v([p("mark","web-mark"),w("design:paramtypes",[Object])],Mt);let Ot=class extends HTMLMenuElement{constructor(e={}){super(),g(this,e)}};Ot=v([p("menu","web-menu"),w("design:paramtypes",[Object])],Ot);let Tt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Tt=v([p("nav","web-nav"),w("design:paramtypes",[Object])],Tt);let le=class extends HTMLObjectElement{constructor(e={}){super(),g(this,e)}};le=v([p("object","web-object"),w("design:paramtypes",[le])],le);let Et=class extends HTMLParagraphElement{constructor(e={}){super(),g(this,e)}};Et=v([p("p","web-paragraph"),w("design:paramtypes",[Object])],Et);let Lt=class extends HTMLPreElement{constructor(e={}){super(),g(this,e)}};Lt=v([p("pre","web-preformatted"),w("design:paramtypes",[Object])],Lt);let Ht=class extends HTMLProgressElement{constructor(e={}){super(),g(this,e)}};Ht=v([p("progress","web-progress"),w("design:paramtypes",[Object])],Ht);let jt=class extends HTMLQuoteElement{constructor(e={}){super(),g(this,e)}};jt=v([p("blockquote","web-blockquote"),w("design:paramtypes",[Object])],jt);let St=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};St=v([p("section","web-section"),w("design:paramtypes",[Object])],St);let Pt=class extends HTMLSelectElement{constructor(e={}){super(),g(this,e)}};Pt=v([p("select","web-select"),w("design:paramtypes",[Object])],Pt);let Dt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Dt=v([p("small","web-small"),w("design:paramtypes",[Object])],Dt);let Ct=class extends HTMLSpanElement{constructor(e={}){super(),g(this,e)}};Ct=v([p("span","web-span"),w("design:paramtypes",[Object])],Ct);let zt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};zt=v([p("strong","web-strong"),w("design:paramtypes",[Object])],zt);let kt=class extends HTMLTimeElement{constructor(e={}){super(),g(this,e)}};kt=v([p("time","web-time"),w("design:paramtypes",[Object])],kt);Zr(()=>{const t=new $({type:"file",accept:"image/svg+xml,image/png",onchange(){const[e]=t.files??[];e&&_r(e).then(r=>{D(Fr(r))})}});t.click()});const Xr=I("form.text.submit"),Yr=R("form.text.submit");Yr(async t=>{D($r(t))});var Jr=Object.defineProperty,Kr=Object.getOwnPropertyDescriptor,en=(t,e,r,o)=>{for(var a=o>1?void 0:o?Kr(e,r):e,l=t.length-1,m;l>=0;l--)(m=t[l])&&(a=(o?m(e,r,a):m(a))||a);return o&&a&&Jr(e,r,a),a};let be=class extends we{constructor(t,e={}){super(e),this.controls=t,this.append(...Ft(this.controls))}get value(){return Lr(this)}};be=en([p("form","cf-form-group")],be);var tn=Object.defineProperty,rn=Object.getOwnPropertyDescriptor,nn=(t,e,r,o)=>{for(var a=o>1?void 0:o?rn(e,r):e,l=t.length-1,m;l>=0;l--)(m=t[l])&&(a=(o?m(e,r,a):m(a))||a);return o&&a&&tn(e,r,a),a};let _e=class extends HTMLDialogElement{constructor(e,r,o={}){super();M(this,"form");M(this,"actions");g(this,o),this.form=new be(e,{onsubmit:l=>{l.preventDefault(),D(r(this.form.value)),this.close(),this.remove()}}),this.actions={confirm:new Y({type:"submit",textContent:"Confirm"}),cancel:new Y({type:"button",textContent:"Cancel",onclick:()=>{this.close("cancel"),this.remove()}})};const a=new ve;a.append(...Er(this.actions)),this.form.append(a),this.append(this.form)}connectedCallback(){setTimeout(()=>{document.addEventListener("click",e=>{const r=e.target;this.form.contains(r)||this.close()})})}};_e=nn([p("dialog","cf-form-dialog")],_e);Qr(()=>{const t=new $({type:"text",name:"text",placeholder:"Texto",required:!0}),e=new $({type:"number",name:"size",step:"0.1",value:"3.2"}),r=new $({type:"checkbox",name:"bold",value:"true",checked:!1}),o=new $({type:"color",name:"color",value:"#000000"}),a={text:t,size:e,color:o,bold:r},l=new _e(a,Xr);document.body.insertAdjacentElement("beforeend",l),l.showModal()});Br(t=>{switch(t){case"image":return D(qr());case"text":return D(Vr())}});const Rt={image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z" /> </svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M420-160v-520H200v-120h560v120H540v520H420Z"/> </svg>'};var Gt=Object.defineProperty,sn=Object.getOwnPropertyDescriptor,Ut=t=>{throw TypeError(t)},an=(t,e,r)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,on=(t,e,r,o)=>{for(var a=o>1?void 0:o?sn(e,r):e,l=t.length-1,m;l>=0;l--)(m=t[l])&&(a=(o?m(e,r,a):m(a))||a);return o&&a&&Gt(e,r,a),a},cn=(t,e,r)=>an(t,e+"",r),un=(t,e,r)=>e.has(t)||Ut("Cannot "+r),ln=(t,e,r)=>e.has(t)?Ut("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),It=(t,e,r)=>(un(t,e,"access private method"),r),re,xe;let Me=class extends HTMLMenuElement{constructor(){super(...arguments),ln(this,re),cn(this,"buttons",{image:It(this,re,xe).call(this,Rt.image,"image","Select image"),text:It(this,re,xe).call(this,Rt.text,"text","Write text")})}connectedCallback(){for(const t of Ft(this.buttons))this.append(t),t.addEventListener("click",()=>{const e=t.value;D(Nr(e))})}};re=new WeakSet;xe=function(t,e,r){return new Y({innerHTML:t,value:e,title:r,type:"button"})};Me=on([p("menu","cf-toolbar")],Me);const fn=()=>{const t=new Me,e=()=>Math.min(innerWidth,innerHeight);D(Ue(e())),onresize=Hr(()=>D(Ue(e())),250),root.append(t,X)};br("Mukta",[400,600,800]).then(fn);
