var dr=Object.defineProperty;var hr=(t,e,n)=>e in t?dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e,n)=>hr(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const M of h.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&o(M)}).observe(document,{childList:!0,subtree:!0});function n(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(i){if(i.ep)return;i.ep=!0;const h=n(i);fetch(i.href,h)}})();const Dt=t=>Object.values(t),pr=t=>new Promise(t),yr=t=>Promise.all(t),mr=async(t,e)=>{const n=e.map(String).map(o=>{const i=`url(./fonts/${t}-${o}.woff2)`;return new FontFace(t,i,{weight:o,style:"normal"}).load()});return(await yr(n)).map(o=>document.fonts.add(o))},vr=t=>pr((e,n)=>{const o=new FileReader;o.addEventListener("error",()=>{const i="Error on load image of type";n(new DOMException(`${i}: ${t.type}`))}),o.addEventListener("loadend",()=>{typeof o.result=="string"&&e(o.result)}),o.readAsDataURL(t)}),gr=(t,e)=>t/e*100;class D{constructor(e=0,n=0){this.x=e,this.y=n}set(e,n){this.x=e,this.y=n}clone(){return new D(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}isCollision(e){const n=e,o=new D(n.x,n.y),i=new D(e.w,e.h),h=o.add(i);return this.x>=n.x&&this.y>=n.y&&this.x<=h.x&&this.y<=h.y}}const wr=t=>Object.fromEntries(new FormData(t).entries()),br=t=>Object.entries(t),Z={string(t){return typeof t=="string"},number(t){return typeof t=="number"&&!isNaN(t)},date(t){return t instanceof Date&&t.toString()!=="Invalid Date"||!isNaN(new Date(String(t)).getTime())},boolean(t){return t===!0||t===!1||t==="true"||t==="false"},object(t){return typeof t=="object"&&t!==null},array(t){return Array.isArray(t)},function(t){return typeof t=="function"},class(t){return typeof t=="function"&&typeof t.prototype=="object"&&"constructor"in t.prototype}},_r=t=>t==null?null:Z.boolean(t)?t==="true"||t===!0:Z.number(t)?t:typeof t=="string"&&Z.number(+t)?+t:Z.date(t)?new Date(t.toString()):(Z.string(t),t),Mr=t=>Object.values(t),Or=t=>{const e=t instanceof HTMLFormElement?wr(t):t;return br(e).reduce((n,[o,i])=>({...n,[o]:_r(i)}),e)},ue=new Map,xr=(t,e)=>{const n=_e(t);return ue.set(t,n.add(e)),()=>{n.delete(e),ue.set(t,n)}},_e=t=>ue.get(t)??new Set,F=t=>e=>xr(t,e);class Tr{constructor(e,n){T(this,"type");T(this,"value");this.type=e,this.value=n}}const A=t=>e=>new class extends Tr{constructor(){super(t,e)}dispatch(){for(const n of _e(this.type))n(this.value)}},C=t=>{for(const e of _e(t.type))e(t.value)},Er=A("canvas.update.size"),Lr=F("canvas.update.size"),le=A("canvas.add.layer"),Hr=F("canvas.add.layer"),p=(t,e)=>n=>{customElements.define(e,n,{extends:t})};var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ze;(function(t){(function(e){var n=typeof globalThis=="object"?globalThis:typeof $e=="object"?$e:typeof self=="object"?self:typeof this=="object"?this:k(),o=i(t);typeof n.Reflect<"u"&&(o=i(n.Reflect,o)),e(o,n),typeof n.Reflect>"u"&&(n.Reflect=t);function i($,U){return function(I,N){Object.defineProperty($,I,{configurable:!0,writable:!0,value:N}),U&&U(I,N)}}function h(){try{return Function("return this;")()}catch{}}function M(){try{return(0,eval)("(function() { return this; })()")}catch{}}function k(){return h()||M()}})(function(e,n){var o=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",h=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",k=typeof Object.create=="function",$={__proto__:[]}instanceof Array,U=!k&&!$,I={create:k?function(){return oe(Object.create(null))}:$?function(){return oe({__proto__:null})}:function(){return oe({})},has:U?function(r,s){return o.call(r,s)}:function(r,s){return s in r},get:U?function(r,s){return o.call(r,s)?r[s]:void 0}:function(r,s){return r[s]}},N=Object.getPrototypeOf(Function),B=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:or(),re=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:cr(),ne=typeof WeakMap=="function"?WeakMap:ur(),z=i?Symbol.for("@reflect-metadata:registry"):void 0,Y=sr(),Me=ar(Y);function zt(r,s,a,c){if(w(a)){if(!Pe(r))throw new TypeError;if(!Ce(s))throw new TypeError;return Xt(r,s)}else{if(!Pe(r))throw new TypeError;if(!E(s))throw new TypeError;if(!E(c)&&!w(c)&&!W(c))throw new TypeError;return W(c)&&(c=void 0),a=S(a),Yt(r,s,a,c)}}e("decorate",zt);function Wt(r,s){function a(c,y){if(!E(c))throw new TypeError;if(!w(y)&&!rr(y))throw new TypeError;Ee(r,s,c,y)}return a}e("metadata",Wt);function Gt(r,s,a,c){if(!E(a))throw new TypeError;return w(c)||(c=S(c)),Ee(r,s,a,c)}e("defineMetadata",Gt);function Ut(r,s,a){if(!E(s))throw new TypeError;return w(a)||(a=S(a)),Oe(r,s,a)}e("hasMetadata",Ut);function Nt(r,s,a){if(!E(s))throw new TypeError;return w(a)||(a=S(a)),se(r,s,a)}e("hasOwnMetadata",Nt);function Bt(r,s,a){if(!E(s))throw new TypeError;return w(a)||(a=S(a)),xe(r,s,a)}e("getMetadata",Bt);function qt(r,s,a){if(!E(s))throw new TypeError;return w(a)||(a=S(a)),Te(r,s,a)}e("getOwnMetadata",qt);function Zt(r,s){if(!E(r))throw new TypeError;return w(s)||(s=S(s)),Le(r,s)}e("getMetadataKeys",Zt);function Vt(r,s){if(!E(r))throw new TypeError;return w(s)||(s=S(s)),He(r,s)}e("getOwnMetadataKeys",Vt);function Qt(r,s,a){if(!E(s))throw new TypeError;if(w(a)||(a=S(a)),!E(s))throw new TypeError;w(a)||(a=S(a));var c=q(s,a,!1);return w(c)?!1:c.OrdinaryDeleteMetadata(r,s,a)}e("deleteMetadata",Qt);function Xt(r,s){for(var a=r.length-1;a>=0;--a){var c=r[a],y=c(s);if(!w(y)&&!W(y)){if(!Ce(y))throw new TypeError;s=y}}return s}function Yt(r,s,a,c){for(var y=r.length-1;y>=0;--y){var H=r[y],L=H(s,a,c);if(!w(L)&&!W(L)){if(!E(L))throw new TypeError;c=L}}return c}function Oe(r,s,a){var c=se(r,s,a);if(c)return!0;var y=ie(s);return W(y)?!1:Oe(r,y,a)}function se(r,s,a){var c=q(s,a,!1);return w(c)?!1:Se(c.OrdinaryHasOwnMetadata(r,s,a))}function xe(r,s,a){var c=se(r,s,a);if(c)return Te(r,s,a);var y=ie(s);if(!W(y))return xe(r,y,a)}function Te(r,s,a){var c=q(s,a,!1);if(!w(c))return c.OrdinaryGetOwnMetadata(r,s,a)}function Ee(r,s,a,c){var y=q(a,c,!0);y.OrdinaryDefineOwnMetadata(r,s,a,c)}function Le(r,s){var a=He(r,s),c=ie(r);if(c===null)return a;var y=Le(c,s);if(y.length<=0)return a;if(a.length<=0)return y;for(var H=new re,L=[],b=0,u=a;b<u.length;b++){var l=u[b],f=H.has(l);f||(H.add(l),L.push(l))}for(var d=0,_=y;d<_.length;d++){var l=_[d],f=H.has(l);f||(H.add(l),L.push(l))}return L}function He(r,s){var a=q(r,s,!1);return a?a.OrdinaryOwnMetadataKeys(r,s):[]}function je(r){if(r===null)return 1;switch(typeof r){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return r===null?1:6;default:return 6}}function w(r){return r===void 0}function W(r){return r===null}function Jt(r){return typeof r=="symbol"}function E(r){return typeof r=="object"?r!==null:typeof r=="function"}function Kt(r,s){switch(je(r)){case 0:return r;case 1:return r;case 2:return r;case 3:return r;case 4:return r;case 5:return r}var a="string",c=De(r,h);if(c!==void 0){var y=c.call(r,a);if(E(y))throw new TypeError;return y}return er(r)}function er(r,s){var a,c;{var y=r.toString;if(J(y)){var c=y.call(r);if(!E(c))return c}var a=r.valueOf;if(J(a)){var c=a.call(r);if(!E(c))return c}}throw new TypeError}function Se(r){return!!r}function tr(r){return""+r}function S(r){var s=Kt(r);return Jt(s)?s:tr(s)}function Pe(r){return Array.isArray?Array.isArray(r):r instanceof Object?r instanceof Array:Object.prototype.toString.call(r)==="[object Array]"}function J(r){return typeof r=="function"}function Ce(r){return typeof r=="function"}function rr(r){switch(je(r)){case 3:return!0;case 4:return!0;default:return!1}}function ae(r,s){return r===s||r!==r&&s!==s}function De(r,s){var a=r[s];if(a!=null){if(!J(a))throw new TypeError;return a}}function ke(r){var s=De(r,M);if(!J(s))throw new TypeError;var a=s.call(r);if(!E(a))throw new TypeError;return a}function Ie(r){return r.value}function Re(r){var s=r.next();return s.done?!1:s}function Fe(r){var s=r.return;s&&s.call(r)}function ie(r){var s=Object.getPrototypeOf(r);if(typeof r!="function"||r===N||s!==N)return s;var a=r.prototype,c=a&&Object.getPrototypeOf(a);if(c==null||c===Object.prototype)return s;var y=c.constructor;return typeof y!="function"||y===r?s:y}function nr(){var r;!w(z)&&typeof n.Reflect<"u"&&!(z in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(r=ir(n.Reflect));var s,a,c,y=new ne,H={registerProvider:L,getProvider:u,setProvider:f};return H;function L(d){if(!Object.isExtensible(H))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case r===d:break;case w(s):s=d;break;case s===d:break;case w(a):a=d;break;case a===d:break;default:c===void 0&&(c=new re),c.add(d);break}}function b(d,_){if(!w(s)){if(s.isProviderFor(d,_))return s;if(!w(a)){if(a.isProviderFor(d,_))return s;if(!w(c))for(var O=ke(c);;){var x=Re(O);if(!x)return;var j=Ie(x);if(j.isProviderFor(d,_))return Fe(O),j}}}if(!w(r)&&r.isProviderFor(d,_))return r}function u(d,_){var O=y.get(d),x;return w(O)||(x=O.get(_)),w(x)&&(x=b(d,_),w(x)||(w(O)&&(O=new B,y.set(d,O)),O.set(_,x))),x}function l(d){if(w(d))throw new TypeError;return s===d||a===d||!w(c)&&c.has(d)}function f(d,_,O){if(!l(O))throw new Error("Metadata provider not registered.");var x=u(d,_);if(x!==O){if(!w(x))return!1;var j=y.get(d);w(j)&&(j=new B,y.set(d,j)),j.set(_,O)}return!0}}function sr(){var r;return!w(z)&&E(n.Reflect)&&Object.isExtensible(n.Reflect)&&(r=n.Reflect[z]),w(r)&&(r=nr()),!w(z)&&E(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,z,{enumerable:!1,configurable:!1,writable:!1,value:r}),r}function ar(r){var s=new ne,a={isProviderFor:function(l,f){var d=s.get(l);return w(d)?!1:d.has(f)},OrdinaryDefineOwnMetadata:L,OrdinaryHasOwnMetadata:y,OrdinaryGetOwnMetadata:H,OrdinaryOwnMetadataKeys:b,OrdinaryDeleteMetadata:u};return Y.registerProvider(a),a;function c(l,f,d){var _=s.get(l),O=!1;if(w(_)){if(!d)return;_=new B,s.set(l,_),O=!0}var x=_.get(f);if(w(x)){if(!d)return;if(x=new B,_.set(f,x),!r.setProvider(l,f,a))throw _.delete(f),O&&s.delete(l),new Error("Wrong provider for target.")}return x}function y(l,f,d){var _=c(f,d,!1);return w(_)?!1:Se(_.has(l))}function H(l,f,d){var _=c(f,d,!1);if(!w(_))return _.get(l)}function L(l,f,d,_){var O=c(d,_,!0);O.set(l,f)}function b(l,f){var d=[],_=c(l,f,!1);if(w(_))return d;for(var O=_.keys(),x=ke(O),j=0;;){var Ae=Re(x);if(!Ae)return d.length=j,d;var lr=Ie(Ae);try{d[j]=lr}catch(fr){try{Fe(x)}finally{throw fr}}j++}}function u(l,f,d){var _=c(f,d,!1);if(w(_)||!_.delete(l))return!1;if(_.size===0){var O=s.get(f);w(O)||(O.delete(d),O.size===0&&s.delete(O))}return!0}}function ir(r){var s=r.defineMetadata,a=r.hasOwnMetadata,c=r.getOwnMetadata,y=r.getOwnMetadataKeys,H=r.deleteMetadata,L=new ne,b={isProviderFor:function(u,l){var f=L.get(u);return!w(f)&&f.has(l)?!0:y(u,l).length?(w(f)&&(f=new re,L.set(u,f)),f.add(l),!0):!1},OrdinaryDefineOwnMetadata:s,OrdinaryHasOwnMetadata:a,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:y,OrdinaryDeleteMetadata:H};return b}function q(r,s,a){var c=Y.getProvider(r,s);if(!w(c))return c;if(a){if(Y.setProvider(r,s,Me))return Me;throw new Error("Illegal state.")}}function or(){var r={},s=[],a=function(){function b(u,l,f){this._index=0,this._keys=u,this._values=l,this._selector=f}return b.prototype["@@iterator"]=function(){return this},b.prototype[M]=function(){return this},b.prototype.next=function(){var u=this._index;if(u>=0&&u<this._keys.length){var l=this._selector(this._keys[u],this._values[u]);return u+1>=this._keys.length?(this._index=-1,this._keys=s,this._values=s):this._index++,{value:l,done:!1}}return{value:void 0,done:!0}},b.prototype.throw=function(u){throw this._index>=0&&(this._index=-1,this._keys=s,this._values=s),u},b.prototype.return=function(u){return this._index>=0&&(this._index=-1,this._keys=s,this._values=s),{value:u,done:!0}},b}(),c=function(){function b(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}return Object.defineProperty(b.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),b.prototype.has=function(u){return this._find(u,!1)>=0},b.prototype.get=function(u){var l=this._find(u,!1);return l>=0?this._values[l]:void 0},b.prototype.set=function(u,l){var f=this._find(u,!0);return this._values[f]=l,this},b.prototype.delete=function(u){var l=this._find(u,!1);if(l>=0){for(var f=this._keys.length,d=l+1;d<f;d++)this._keys[d-1]=this._keys[d],this._values[d-1]=this._values[d];return this._keys.length--,this._values.length--,ae(u,this._cacheKey)&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},b.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},b.prototype.keys=function(){return new a(this._keys,this._values,y)},b.prototype.values=function(){return new a(this._keys,this._values,H)},b.prototype.entries=function(){return new a(this._keys,this._values,L)},b.prototype["@@iterator"]=function(){return this.entries()},b.prototype[M]=function(){return this.entries()},b.prototype._find=function(u,l){if(!ae(this._cacheKey,u)){this._cacheIndex=-1;for(var f=0;f<this._keys.length;f++)if(ae(this._keys[f],u)){this._cacheIndex=f;break}}return this._cacheIndex<0&&l&&(this._cacheIndex=this._keys.length,this._keys.push(u),this._values.push(void 0)),this._cacheIndex},b}();return c;function y(b,u){return b}function H(b,u){return u}function L(b,u){return[b,u]}}function cr(){var r=function(){function s(){this._map=new B}return Object.defineProperty(s.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),s.prototype.has=function(a){return this._map.has(a)},s.prototype.add=function(a){return this._map.set(a,a),this},s.prototype.delete=function(a){return this._map.delete(a)},s.prototype.clear=function(){this._map.clear()},s.prototype.keys=function(){return this._map.keys()},s.prototype.values=function(){return this._map.keys()},s.prototype.entries=function(){return this._map.entries()},s.prototype["@@iterator"]=function(){return this.keys()},s.prototype[M]=function(){return this.keys()},s}();return r}function ur(){var r=16,s=I.create(),a=c();return function(){function u(){this._key=c()}return u.prototype.has=function(l){var f=y(l,!1);return f!==void 0?I.has(f,this._key):!1},u.prototype.get=function(l){var f=y(l,!1);return f!==void 0?I.get(f,this._key):void 0},u.prototype.set=function(l,f){var d=y(l,!0);return d[this._key]=f,this},u.prototype.delete=function(l){var f=y(l,!1);return f!==void 0?delete f[this._key]:!1},u.prototype.clear=function(){this._key=c()},u}();function c(){var u;do u="@@WeakMap@@"+b();while(I.has(s,u));return s[u]=!0,u}function y(u,l){if(!o.call(u,a)){if(!l)return;Object.defineProperty(u,a,{value:I.create()})}return u[a]}function H(u,l){for(var f=0;f<l;++f)u[f]=Math.random()*255|0;return u}function L(u){if(typeof Uint8Array=="function"){var l=new Uint8Array(u);return typeof crypto<"u"?crypto.getRandomValues(l):typeof msCrypto<"u"?msCrypto.getRandomValues(l):H(l,u),l}return H(new Array(u),u)}function b(){var u=L(r);u[6]=u[6]&79|64,u[8]=u[8]&191|128;for(var l="",f=0;f<r;++f){var d=u[f];(f===4||f===6||f===8)&&(l+="-"),d<16&&(l+="0"),l+=d.toString(16).toLowerCase()}return l}}function oe(r){return r.__=void 0,delete r.__,r}})})(ze||(ze={}));function m(t,e){return Object.assign(t,e??{})}var kt=Object.defineProperty,jr=Object.getOwnPropertyDescriptor,It=t=>{throw TypeError(t)},Sr=(t,e,n)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pr=(t,e,n,o)=>{for(var i=o>1?void 0:o?jr(e,n):e,h=t.length-1,M;h>=0;h--)(M=t[h])&&(i=(o?M(e,n,i):M(i))||i);return o&&i&&kt(e,n,i),i},K=(t,e,n)=>Sr(t,typeof e!="symbol"?e+"":e,n),Rt=(t,e,n)=>e.has(t)||It("Cannot "+n),P=(t,e,n)=>(Rt(t,e,"read from private field"),n?n.call(t):e.get(t)),V=(t,e,n)=>e.has(t)?It("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),We=(t,e,n,o)=>(Rt(t,e,"write to private field"),e.set(t,n),n),Q,R,fe,de,he;let pe=class extends HTMLCanvasElement{constructor(){super(),K(this,"context"),V(this,Q,[]),V(this,R,null),K(this,"addLayer",(...t)=>{P(this,Q).push(...t)}),K(this,"render",async()=>{this.context&&(this.context.clearRect(0,0,this.width,this.height),P(this,Q).filter(t=>t.active).sort((t,e)=>t.order-e.order).map(t=>{var h;const{width:e,height:n}=t,{x:o,y:i}=t.position;(h=this.context)==null||h.drawImage(t,o,i,e,n)}))}),K(this,"setSize",t=>{this.width=t,this.height=t}),V(this,fe,({offsetX:t,offsetY:e})=>{const n=new D(t,e),o=P(this,Q).find(({rect:i})=>n.isCollision(i));o&&(We(this,R,o),o.startDrag(n))}),V(this,de,t=>{if(P(this,R)){const{offsetX:e,offsetY:n}=t,o=new D(e,n);P(this,R).dragTo(o),this.render()}}),V(this,he,()=>{P(this,R)&&(P(this,R).stopDrag(),We(this,R,null),this.render())}),this.context=this.getContext("2d")}connectedCallback(){this.onmousedown=P(this,fe),this.onmousemove=P(this,de),this.onmouseup=P(this,he)}};Q=new WeakMap;R=new WeakMap;fe=new WeakMap;de=new WeakMap;he=new WeakMap;pe=Pr([p("canvas","cf-canvas")],pe);const te=new pe;Hr(t=>{te.addLayer(t),te.render().then()});Lr(t=>{const e=Math.min(t.current.w,t.current.h),o=gr(e,t.ideal)>100?t.ideal:e;te.setSize(o)});const Cr=A("layer.create.image"),Dr=F("layer.create.image"),kr=A("layer.create.text"),Ir=F("layer.create.text");class Ft extends OffscreenCanvas{constructor(n,o,i=0,h=0){super(n,o);T(this,"context");T(this,"_position",new D);T(this,"_offset",new D);T(this,"_draggable",!0);T(this,"_dragging",!1);T(this,"_active",!0);T(this,"_order",1);this._position=new D(i,h),this.context=this.getContext("2d")}get position(){return this._position}get dragging(){return this._dragging}get offset(){return this._offset}get active(){return this._active}get order(){return this._order}get rect(){return{x:this.position.x,y:this.position.y,w:this.width,h:this.height}}setActive(n){return this._active=n,this}setOrder(n){return this._order=n,this}setDraggable(n){return this._draggable=n,this}setDragging(n){return this._dragging=n,this}startDrag(n){this.setDragging(!0),this.offset.copy(n).sub(this.position)}dragTo(n){this.dragging&&this.position.copy(n).sub(this.offset)}stopDrag(){this.setDragging(!1)}}class Rr extends Ft{constructor(){super(...arguments);T(this,"image",new Image(this.width,this.height))}async render(){var M;if(!((M=this.context)!=null&&M.drawImage))return;await this.image.decode();const{x:n,y:o,w:i,h}=this.rect;this.context.drawImage(this.image,n,o,i,h)}setSrc(n){return this.image.src=n,this}}Dr(t=>{const e=new Image;e.addEventListener("load",async()=>{const{width:n,height:o}=e,i=new Rr(n,o,0,0);i.image.src=t,await i.render(),C(le(i))}),e.src=t});class Fr extends Ft{constructor(){super(...arguments);T(this,"_text","");T(this,"_color","#111111");T(this,"_font","Mukta");T(this,"_size",3.2);T(this,"_weight","normal")}async render(){var o;if(!((o=this.context)!=null&&o.drawImage))return;this.context.fillStyle=this._color,this.context.font=this.font;const n=this._size*10;this.context.fillText(this._text,0,n,this.width)}setText(n){return this._text=n,this}setColor(n){return this._color=n,this}setFont(n){return this._font=n,this}setSize(n){return this._size=n,this}setWeight(n){return this._weight=n,this}get font(){return`${this._weight} ${this._size}em ${this._font}`}}Ir(async({text:t,size:e,bold:n})=>{const o=new Fr(540,540,0,0);o.setText(t).setSize(e),n?(await o.setWeight("bold").render(),C(le(o))):(await o.render(),C(le(o)))});const Ar=A("toolbar.selected"),$r=F("toolbar.selected"),zr=A("toolbar.select.image"),Wr=F("toolbar.select.image"),Gr=A("toolbar.select.text"),Ur=F("toolbar.select.text");function v(t,e,n,o){var i=arguments.length,h=i<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,n):o,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,e,n,o);else for(var k=t.length-1;k>=0;k--)(M=t[k])&&(h=(i<3?M(h):i>3?M(e,n,h):M(e,n))||h);return i>3&&h&&Object.defineProperty(e,n,h),h}function g(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}let Ge=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Ge=v([p("address","web-address"),g("design:paramtypes",[Object])],Ge);let Ue=class extends HTMLAnchorElement{constructor(n={}){super();T(this,"target");T(this,"rel");m(this,n)}};Ue=v([p("a","web-anchor"),g("design:paramtypes",[Object])],Ue);let Ne=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Ne=v([p("article","web-article"),g("design:paramtypes",[Object])],Ne);let Be=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Be=v([p("aside","web-aside"),g("design:paramtypes",[Object])],Be);let qe=class extends HTMLBRElement{constructor(e={}){super(),m(this,e)}};qe=v([p("br","web-break"),g("design:paramtypes",[Object])],qe);let X=class extends HTMLButtonElement{constructor(e={}){super(),m(this,e)}};X=v([p("button","web-button"),g("design:paramtypes",[Object])],X);let Ze=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Ze=v([p("cite","web-cite"),g("design:paramtypes",[Object])],Ze);let Ve=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Ve=v([p("code","web-code"),g("design:paramtypes",[Object])],Ve);let Qe=class extends HTMLDataListElement{constructor(e={}){super(),m(this,e)}};Qe=v([p("datalist","web-data-list"),g("design:paramtypes",[Object])],Qe);let Xe=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Xe=v([p("dd","web-description-definition"),g("design:paramtypes",[Object])],Xe);let Ye=class extends HTMLDListElement{constructor(e={}){super(),m(this,e)}};Ye=v([p("dl","web-description-list"),g("design:paramtypes",[Object])],Ye);let Je=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Je=v([p("dt","web-description-term"),g("design:paramtypes",[Object])],Je);let Ke=class extends HTMLDivElement{constructor(e={}){super(),m(this,e)}};Ke=v([p("div","web-div"),g("design:paramtypes",[Object])],Ke);let et=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};et=v([p("em","web-emphasis"),g("design:paramtypes",[Object])],et);let tt=class extends HTMLFieldSetElement{constructor(e={}){super(),m(this,e)}};tt=v([p("fieldset","web-fieldset"),g("design:paramtypes",[Object])],tt);let rt=class extends HTMLElement{};rt=v([p("figcaption","web-figcaption")],rt);let nt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};nt=v([p("figure","web-figure"),g("design:paramtypes",[Object])],nt);let ye=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};ye=v([p("footer","web-footer"),g("design:paramtypes",[Object])],ye);let me=class extends HTMLFormElement{constructor(e={}){super(),m(this,e)}};me=v([p("form","web-form"),g("design:paramtypes",[Object])],me);let st=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};st=v([p("header","web-header"),g("design:paramtypes",[Object])],st);let at=class extends HTMLHeadingElement{constructor(e={}){super(),m(this,e)}};at=v([p("h1","web-h1"),g("design:paramtypes",[Object])],at);let it=class extends HTMLHeadingElement{constructor(e={}){super(),m(this,e)}};it=v([p("h2","web-h2"),g("design:paramtypes",[Object])],it);let ot=class extends HTMLHeadingElement{constructor(e={}){super(),m(this,e)}};ot=v([p("h3","web-h3"),g("design:paramtypes",[Object])],ot);let ct=class extends HTMLHeadingElement{constructor(e={}){super(),m(this,e)}};ct=v([p("h4","web-h4"),g("design:paramtypes",[Object])],ct);let ut=class extends HTMLHeadingElement{constructor(e={}){super(),m(this,e)}};ut=v([p("h5","web-h5"),g("design:paramtypes",[Object])],ut);let lt=class extends HTMLHeadingElement{constructor(e={}){super(),m(this,e)}};lt=v([p("h6","web-h6"),g("design:paramtypes",[Object])],lt);let ft=class extends HTMLHRElement{constructor(e={}){super(),m(this,e)}};ft=v([p("hr","web-horizontal-rule"),g("design:paramtypes",[Object])],ft);let G=class extends HTMLInputElement{constructor(e={}){super(),m(this,e)}};G=v([p("input","web-input"),g("design:paramtypes",[Object])],G);let dt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};dt=v([p("kbd","web-keyboard"),g("design:paramtypes",[Object])],dt);let ht=class extends HTMLLabelElement{constructor(e={}){super(),m(this,e)}};ht=v([p("label","web-label"),g("design:paramtypes",[Object])],ht);let pt=class extends HTMLLIElement{constructor(e={}){super(),m(this,e)}};pt=v([p("li","web-list-item"),g("design:paramtypes",[Object])],pt);let yt=class extends HTMLOListElement{constructor(e={}){super(),m(this,e)}};yt=v([p("ol","web-ordered-list"),g("design:paramtypes",[Object])],yt);let mt=class extends HTMLUListElement{constructor(e={}){super(),m(this,e)}};mt=v([p("ul","web-unordered-list"),g("design:paramtypes",[Object])],mt);let vt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};vt=v([p("main","web-main"),g("design:paramtypes",[Object])],vt);let gt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};gt=v([p("mark","web-mark"),g("design:paramtypes",[Object])],gt);let wt=class extends HTMLMenuElement{constructor(e={}){super(),m(this,e)}};wt=v([p("menu","web-menu"),g("design:paramtypes",[Object])],wt);let bt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};bt=v([p("nav","web-nav"),g("design:paramtypes",[Object])],bt);let ce=class extends HTMLObjectElement{constructor(e={}){super(),m(this,e)}};ce=v([p("object","web-object"),g("design:paramtypes",[ce])],ce);let _t=class extends HTMLParagraphElement{constructor(e={}){super(),m(this,e)}};_t=v([p("p","web-paragraph"),g("design:paramtypes",[Object])],_t);let Mt=class extends HTMLPreElement{constructor(e={}){super(),m(this,e)}};Mt=v([p("pre","web-preformatted"),g("design:paramtypes",[Object])],Mt);let Ot=class extends HTMLProgressElement{constructor(e={}){super(),m(this,e)}};Ot=v([p("progress","web-progress"),g("design:paramtypes",[Object])],Ot);let xt=class extends HTMLQuoteElement{constructor(e={}){super(),m(this,e)}};xt=v([p("blockquote","web-blockquote"),g("design:paramtypes",[Object])],xt);let Tt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Tt=v([p("section","web-section"),g("design:paramtypes",[Object])],Tt);let Et=class extends HTMLSelectElement{constructor(e={}){super(),m(this,e)}};Et=v([p("select","web-select"),g("design:paramtypes",[Object])],Et);let Lt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};Lt=v([p("small","web-small"),g("design:paramtypes",[Object])],Lt);let Ht=class extends HTMLSpanElement{constructor(e={}){super(),m(this,e)}};Ht=v([p("span","web-span"),g("design:paramtypes",[Object])],Ht);let jt=class extends HTMLElement{constructor(e={}){super(),m(this,e)}};jt=v([p("strong","web-strong"),g("design:paramtypes",[Object])],jt);let St=class extends HTMLTimeElement{constructor(e={}){super(),m(this,e)}};St=v([p("time","web-time"),g("design:paramtypes",[Object])],St);Wr(()=>{const t=new G({type:"file",accept:"image/svg+xml,image/png",onchange(){const[e]=t.files??[];e&&vr(e).then(n=>{C(Cr(n))})}});t.click()});const Nr=A("form.text.submit"),Br=F("form.text.submit");Br(async t=>{C(kr(t))});var qr=Object.defineProperty,Zr=Object.getOwnPropertyDescriptor,Vr=(t,e,n,o)=>{for(var i=o>1?void 0:o?Zr(e,n):e,h=t.length-1,M;h>=0;h--)(M=t[h])&&(i=(o?M(e,n,i):M(i))||i);return o&&i&&qr(e,n,i),i};let ve=class extends me{constructor(t,e={}){super(e),this.controls=t,this.append(...Dt(this.controls))}get value(){return Or(this)}};ve=Vr([p("form","cf-form-group")],ve);var Qr=Object.defineProperty,Xr=Object.getOwnPropertyDescriptor,Yr=(t,e,n,o)=>{for(var i=o>1?void 0:o?Xr(e,n):e,h=t.length-1,M;h>=0;h--)(M=t[h])&&(i=(o?M(e,n,i):M(i))||i);return o&&i&&Qr(e,n,i),i};let ge=class extends HTMLDialogElement{constructor(e,n,o={}){super();T(this,"form");T(this,"actions");m(this,o),this.form=new ve(e,{onsubmit:h=>{h.preventDefault(),C(n(this.form.value)),this.close(),this.remove()}}),this.actions={confirm:new X({type:"submit",textContent:"Confirm"}),cancel:new X({type:"button",textContent:"Cancel",onclick:()=>{this.close("cancel"),this.remove()}})};const i=new ye;i.append(...Mr(this.actions)),this.form.append(i),this.append(this.form)}connectedCallback(){setTimeout(()=>{document.addEventListener("click",e=>{const n=e.target;this.form.contains(n)||this.close()})})}};ge=Yr([p("dialog","cf-form-dialog")],ge);Ur(()=>{const t=new G({type:"text",name:"text",placeholder:"Texto",required:!0}),e=new G({type:"number",name:"size",step:"0.1",value:"3.2"}),n=new G({type:"checkbox",name:"bold",value:"true",checked:!1}),o=new ge({text:t,size:e,bold:n},Nr);document.body.insertAdjacentElement("beforeend",o),o.showModal()});$r(t=>{switch(t){case"image":return C(zr());case"text":return C(Gr())}});const Pt={image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z" /> </svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M420-160v-520H200v-120h560v120H540v520H420Z"/> </svg>'};var At=Object.defineProperty,Jr=Object.getOwnPropertyDescriptor,$t=t=>{throw TypeError(t)},Kr=(t,e,n)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,en=(t,e,n,o)=>{for(var i=o>1?void 0:o?Jr(e,n):e,h=t.length-1,M;h>=0;h--)(M=t[h])&&(i=(o?M(e,n,i):M(i))||i);return o&&i&&At(e,n,i),i},tn=(t,e,n)=>Kr(t,e+"",n),rn=(t,e,n)=>e.has(t)||$t("Cannot "+n),nn=(t,e,n)=>e.has(t)?$t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ct=(t,e,n)=>(rn(t,e,"access private method"),n),ee,we;let be=class extends HTMLMenuElement{constructor(){super(...arguments),nn(this,ee),tn(this,"buttons",{image:Ct(this,ee,we).call(this,Pt.image,"image","Select image"),text:Ct(this,ee,we).call(this,Pt.text,"text","Write text")})}connectedCallback(){for(const t of Dt(this.buttons))this.append(t),t.addEventListener("click",()=>{const e=t.value;C(Ar(e))})}};ee=new WeakSet;we=function(t,e,n){return new X({innerHTML:t,value:e,title:n,type:"button"})};be=en([p("menu","cf-toolbar")],be);const sn=()=>{const t=new be,{clientWidth:e,clientHeight:n}=root;C(Er({current:{w:e,h:n},ideal:540})),root.append(t,te)};mr("Mukta",[400,600,800]).then(sn);
