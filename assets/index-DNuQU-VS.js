var Er=Object.defineProperty;var Lr=(t,e,r)=>e in t?Er(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var M=(t,e,r)=>Lr(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const b of l.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();const Wt=t=>Object.values(t),Hr=t=>new Promise(t),jr=t=>Promise.all(t),Sr=async(t,e)=>{const r=e.map(String).map(o=>{const a=`url(./fonts/${t}-${o}.woff2)`;return new FontFace(t,a,{weight:o,style:"normal"}).load()});return(await jr(r)).map(o=>document.fonts.add(o))},Pr=t=>Hr((e,r)=>{const o=new FileReader;o.addEventListener("error",()=>{const a="Error on load image of type";r(new DOMException(`${a}: ${t.type}`))}),o.addEventListener("loadend",()=>{typeof o.result=="string"&&e(o.result)}),o.readAsDataURL(t)}),Dr=(t,e)=>t/e*100;class R{constructor(e=0,r=0){M(this,"isCollision",e=>{const r=e,o=new R(r.x,r.y),a=new R(e.w,e.h),l=o.add(a);return this.x>=r.x&&this.y>=r.y&&this.x<=l.x&&this.y<=l.y});this.x=e,this.y=r}set(e,r){this.x=e,this.y=r}clone(){return new R(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}}const Cr=t=>Object.fromEntries(new FormData(t).entries()),zr=t=>Object.entries(t),X={string(t){return typeof t=="string"},number(t){return typeof t=="number"&&!isNaN(t)},date(t){return t instanceof Date&&t.toString()!=="Invalid Date"||!isNaN(new Date(String(t)).getTime())},boolean(t){return t===!0||t===!1||t==="true"||t==="false"},object(t){return typeof t=="object"&&t!==null},array(t){return Array.isArray(t)},function(t){return typeof t=="function"},class(t){return typeof t=="function"&&typeof t.prototype=="object"&&"constructor"in t.prototype}},kr=t=>t==null?null:X.boolean(t)?t==="true"||t===!0:X.number(t)?t:typeof t=="string"&&X.number(+t)?+t:X.date(t)?new Date(t.toString()):(X.string(t),t),Rr=t=>Object.values(t),Ir=t=>{const e=t instanceof HTMLFormElement?Cr(t):t;return zr(e).reduce((r,[o,a])=>({...r,[o]:kr(a)}),e)};function Fr(t,e=1e3){let r=new Date().getTime(),o,a;return l=>{const b=new Date().getTime();o=l,b-r>=e?(r=b,t(l)):(clearTimeout(a),a=window.setTimeout(()=>{r=new Date().getTime(),t(o)},e-(b-r)))}}const fe=new Map,$r=(t,e)=>{const r=Te(t);return fe.set(t,r.add(e)),()=>{r.delete(e),fe.set(t,r)}},Te=t=>fe.get(t)??new Set,I=t=>e=>$r(t,e);class Ar{constructor(e,r){M(this,"type");M(this,"value");this.type=e,this.value=r}}const F=t=>e=>new class extends Ar{constructor(){super(t,e)}dispatch(){for(const r of Te(this.type))r(this.value)}},P=t=>{for(const e of Te(t.type))e(t.value)},Be=F("window.resize"),Wr=I("window.resize"),Gr=F("canvas.update.size"),Ur=I("canvas.update.size"),de=F("canvas.add.layer"),Nr=I("canvas.add.layer"),p=(t,e)=>r=>{customElements.define(e,r,{extends:t})};var qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ze;(function(t){(function(e){var r=typeof globalThis=="object"?globalThis:typeof qe=="object"?qe:typeof self=="object"?self:typeof this=="object"?this:D(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),e(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(U,Z){return function($,Y){Object.defineProperty(U,$,{configurable:!0,writable:!0,value:Y}),Z&&Z($,Y)}}function l(){try{return Function("return this;")()}catch{}}function b(){try{return(0,eval)("(function() { return this; })()")}catch{}}function D(){return l()||b()}})(function(e,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",l=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",b=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",D=typeof Object.create=="function",U={__proto__:[]}instanceof Array,Z=!D&&!U,$={create:D?function(){return ue(Object.create(null))}:U?function(){return ue({__proto__:null})}:function(){return ue({})},has:Z?function(n,s){return o.call(n,s)}:function(n,s){return s in n},get:Z?function(n,s){return o.call(n,s)?n[s]:void 0}:function(n,s){return n[s]}},Y=Object.getPrototypeOf(Function),V=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:_r(),se=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:xr(),ie=typeof WeakMap=="function"?WeakMap:Mr(),N=a?Symbol.for("@reflect-metadata:registry"):void 0,ee=vr(),He=wr(ee);function er(n,s,i,c){if(w(i)){if(!Ie(n))throw new TypeError;if(!Fe(s))throw new TypeError;return lr(n,s)}else{if(!Ie(n))throw new TypeError;if(!E(s))throw new TypeError;if(!E(c)&&!w(c)&&!B(c))throw new TypeError;return B(c)&&(c=void 0),i=z(i),fr(n,s,i,c)}}e("decorate",er);function tr(n,s){function i(c,y){if(!E(c))throw new TypeError;if(!w(y)&&!gr(y))throw new TypeError;De(n,s,c,y)}return i}e("metadata",tr);function rr(n,s,i,c){if(!E(i))throw new TypeError;return w(c)||(c=z(c)),De(n,s,i,c)}e("defineMetadata",rr);function nr(n,s,i){if(!E(s))throw new TypeError;return w(i)||(i=z(i)),je(n,s,i)}e("hasMetadata",nr);function sr(n,s,i){if(!E(s))throw new TypeError;return w(i)||(i=z(i)),ae(n,s,i)}e("hasOwnMetadata",sr);function ir(n,s,i){if(!E(s))throw new TypeError;return w(i)||(i=z(i)),Se(n,s,i)}e("getMetadata",ir);function ar(n,s,i){if(!E(s))throw new TypeError;return w(i)||(i=z(i)),Pe(n,s,i)}e("getOwnMetadata",ar);function or(n,s){if(!E(n))throw new TypeError;return w(s)||(s=z(s)),Ce(n,s)}e("getMetadataKeys",or);function cr(n,s){if(!E(n))throw new TypeError;return w(s)||(s=z(s)),ze(n,s)}e("getOwnMetadataKeys",cr);function ur(n,s,i){if(!E(s))throw new TypeError;if(w(i)||(i=z(i)),!E(s))throw new TypeError;w(i)||(i=z(i));var c=Q(s,i,!1);return w(c)?!1:c.OrdinaryDeleteMetadata(n,s,i)}e("deleteMetadata",ur);function lr(n,s){for(var i=n.length-1;i>=0;--i){var c=n[i],y=c(s);if(!w(y)&&!B(y)){if(!Fe(y))throw new TypeError;s=y}}return s}function fr(n,s,i,c){for(var y=n.length-1;y>=0;--y){var H=n[y],L=H(s,i,c);if(!w(L)&&!B(L)){if(!E(L))throw new TypeError;c=L}}return c}function je(n,s,i){var c=ae(n,s,i);if(c)return!0;var y=ce(s);return B(y)?!1:je(n,y,i)}function ae(n,s,i){var c=Q(s,i,!1);return w(c)?!1:Re(c.OrdinaryHasOwnMetadata(n,s,i))}function Se(n,s,i){var c=ae(n,s,i);if(c)return Pe(n,s,i);var y=ce(s);if(!B(y))return Se(n,y,i)}function Pe(n,s,i){var c=Q(s,i,!1);if(!w(c))return c.OrdinaryGetOwnMetadata(n,s,i)}function De(n,s,i,c){var y=Q(i,c,!0);y.OrdinaryDefineOwnMetadata(n,s,i,c)}function Ce(n,s){var i=ze(n,s),c=ce(n);if(c===null)return i;var y=Ce(c,s);if(y.length<=0)return i;if(i.length<=0)return y;for(var H=new se,L=[],_=0,u=i;_<u.length;_++){var f=u[_],d=H.has(f);d||(H.add(f),L.push(f))}for(var h=0,x=y;h<x.length;h++){var f=x[h],d=H.has(f);d||(H.add(f),L.push(f))}return L}function ze(n,s){var i=Q(n,s,!1);return i?i.OrdinaryOwnMetadataKeys(n,s):[]}function ke(n){if(n===null)return 1;switch(typeof n){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return n===null?1:6;default:return 6}}function w(n){return n===void 0}function B(n){return n===null}function dr(n){return typeof n=="symbol"}function E(n){return typeof n=="object"?n!==null:typeof n=="function"}function hr(n,s){switch(ke(n)){case 0:return n;case 1:return n;case 2:return n;case 3:return n;case 4:return n;case 5:return n}var i="string",c=$e(n,l);if(c!==void 0){var y=c.call(n,i);if(E(y))throw new TypeError;return y}return pr(n)}function pr(n,s){var i,c;{var y=n.toString;if(te(y)){var c=y.call(n);if(!E(c))return c}var i=n.valueOf;if(te(i)){var c=i.call(n);if(!E(c))return c}}throw new TypeError}function Re(n){return!!n}function yr(n){return""+n}function z(n){var s=hr(n);return dr(s)?s:yr(s)}function Ie(n){return Array.isArray?Array.isArray(n):n instanceof Object?n instanceof Array:Object.prototype.toString.call(n)==="[object Array]"}function te(n){return typeof n=="function"}function Fe(n){return typeof n=="function"}function gr(n){switch(ke(n)){case 3:return!0;case 4:return!0;default:return!1}}function oe(n,s){return n===s||n!==n&&s!==s}function $e(n,s){var i=n[s];if(i!=null){if(!te(i))throw new TypeError;return i}}function Ae(n){var s=$e(n,b);if(!te(s))throw new TypeError;var i=s.call(n);if(!E(i))throw new TypeError;return i}function We(n){return n.value}function Ge(n){var s=n.next();return s.done?!1:s}function Ue(n){var s=n.return;s&&s.call(n)}function ce(n){var s=Object.getPrototypeOf(n);if(typeof n!="function"||n===Y||s!==Y)return s;var i=n.prototype,c=i&&Object.getPrototypeOf(i);if(c==null||c===Object.prototype)return s;var y=c.constructor;return typeof y!="function"||y===n?s:y}function mr(){var n;!w(N)&&typeof r.Reflect<"u"&&!(N in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(n=br(r.Reflect));var s,i,c,y=new ie,H={registerProvider:L,getProvider:u,setProvider:d};return H;function L(h){if(!Object.isExtensible(H))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case n===h:break;case w(s):s=h;break;case s===h:break;case w(i):i=h;break;case i===h:break;default:c===void 0&&(c=new se),c.add(h);break}}function _(h,x){if(!w(s)){if(s.isProviderFor(h,x))return s;if(!w(i)){if(i.isProviderFor(h,x))return s;if(!w(c))for(var O=Ae(c);;){var T=Ge(O);if(!T)return;var C=We(T);if(C.isProviderFor(h,x))return Ue(O),C}}}if(!w(n)&&n.isProviderFor(h,x))return n}function u(h,x){var O=y.get(h),T;return w(O)||(T=O.get(x)),w(T)&&(T=_(h,x),w(T)||(w(O)&&(O=new V,y.set(h,O)),O.set(x,T))),T}function f(h){if(w(h))throw new TypeError;return s===h||i===h||!w(c)&&c.has(h)}function d(h,x,O){if(!f(O))throw new Error("Metadata provider not registered.");var T=u(h,x);if(T!==O){if(!w(T))return!1;var C=y.get(h);w(C)&&(C=new V,y.set(h,C)),C.set(x,O)}return!0}}function vr(){var n;return!w(N)&&E(r.Reflect)&&Object.isExtensible(r.Reflect)&&(n=r.Reflect[N]),w(n)&&(n=mr()),!w(N)&&E(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,N,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}function wr(n){var s=new ie,i={isProviderFor:function(f,d){var h=s.get(f);return w(h)?!1:h.has(d)},OrdinaryDefineOwnMetadata:L,OrdinaryHasOwnMetadata:y,OrdinaryGetOwnMetadata:H,OrdinaryOwnMetadataKeys:_,OrdinaryDeleteMetadata:u};return ee.registerProvider(i),i;function c(f,d,h){var x=s.get(f),O=!1;if(w(x)){if(!h)return;x=new V,s.set(f,x),O=!0}var T=x.get(d);if(w(T)){if(!h)return;if(T=new V,x.set(d,T),!n.setProvider(f,d,i))throw x.delete(d),O&&s.delete(f),new Error("Wrong provider for target.")}return T}function y(f,d,h){var x=c(d,h,!1);return w(x)?!1:Re(x.has(f))}function H(f,d,h){var x=c(d,h,!1);if(!w(x))return x.get(f)}function L(f,d,h,x){var O=c(h,x,!0);O.set(f,d)}function _(f,d){var h=[],x=c(f,d,!1);if(w(x))return h;for(var O=x.keys(),T=Ae(O),C=0;;){var Ne=Ge(T);if(!Ne)return h.length=C,h;var Or=We(Ne);try{h[C]=Or}catch(Tr){try{Ue(T)}finally{throw Tr}}C++}}function u(f,d,h){var x=c(d,h,!1);if(w(x)||!x.delete(f))return!1;if(x.size===0){var O=s.get(d);w(O)||(O.delete(h),O.size===0&&s.delete(O))}return!0}}function br(n){var s=n.defineMetadata,i=n.hasOwnMetadata,c=n.getOwnMetadata,y=n.getOwnMetadataKeys,H=n.deleteMetadata,L=new ie,_={isProviderFor:function(u,f){var d=L.get(u);return!w(d)&&d.has(f)?!0:y(u,f).length?(w(d)&&(d=new se,L.set(u,d)),d.add(f),!0):!1},OrdinaryDefineOwnMetadata:s,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:y,OrdinaryDeleteMetadata:H};return _}function Q(n,s,i){var c=ee.getProvider(n,s);if(!w(c))return c;if(i){if(ee.setProvider(n,s,He))return He;throw new Error("Illegal state.")}}function _r(){var n={},s=[],i=function(){function _(u,f,d){this._index=0,this._keys=u,this._values=f,this._selector=d}return _.prototype["@@iterator"]=function(){return this},_.prototype[b]=function(){return this},_.prototype.next=function(){var u=this._index;if(u>=0&&u<this._keys.length){var f=this._selector(this._keys[u],this._values[u]);return u+1>=this._keys.length?(this._index=-1,this._keys=s,this._values=s):this._index++,{value:f,done:!1}}return{value:void 0,done:!0}},_.prototype.throw=function(u){throw this._index>=0&&(this._index=-1,this._keys=s,this._values=s),u},_.prototype.return=function(u){return this._index>=0&&(this._index=-1,this._keys=s,this._values=s),{value:u,done:!0}},_}(),c=function(){function _(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(_.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_.prototype.has=function(u){return this._find(u,!1)>=0},_.prototype.get=function(u){var f=this._find(u,!1);return f>=0?this._values[f]:void 0},_.prototype.set=function(u,f){var d=this._find(u,!0);return this._values[d]=f,this},_.prototype.delete=function(u){var f=this._find(u,!1);if(f>=0){for(var d=this._keys.length,h=f+1;h<d;h++)this._keys[h-1]=this._keys[h],this._values[h-1]=this._values[h];return this._keys.length--,this._values.length--,oe(u,this._cacheKey)&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},_.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},_.prototype.keys=function(){return new i(this._keys,this._values,y)},_.prototype.values=function(){return new i(this._keys,this._values,H)},_.prototype.entries=function(){return new i(this._keys,this._values,L)},_.prototype["@@iterator"]=function(){return this.entries()},_.prototype[b]=function(){return this.entries()},_.prototype._find=function(u,f){if(!oe(this._cacheKey,u)){this._cacheIndex=-1;for(var d=0;d<this._keys.length;d++)if(oe(this._keys[d],u)){this._cacheIndex=d;break}}return this._cacheIndex<0&&f&&(this._cacheIndex=this._keys.length,this._keys.push(u),this._values.push(void 0)),this._cacheIndex},_}();return c;function y(_,u){return _}function H(_,u){return u}function L(_,u){return[_,u]}}function xr(){var n=function(){function s(){this._map=new V}return Object.defineProperty(s.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),s.prototype.has=function(i){return this._map.has(i)},s.prototype.add=function(i){return this._map.set(i,i),this},s.prototype.delete=function(i){return this._map.delete(i)},s.prototype.clear=function(){this._map.clear()},s.prototype.keys=function(){return this._map.keys()},s.prototype.values=function(){return this._map.keys()},s.prototype.entries=function(){return this._map.entries()},s.prototype["@@iterator"]=function(){return this.keys()},s.prototype[b]=function(){return this.keys()},s}();return n}function Mr(){var n=16,s=$.create(),i=c();return function(){function u(){this._key=c()}return u.prototype.has=function(f){var d=y(f,!1);return d!==void 0?$.has(d,this._key):!1},u.prototype.get=function(f){var d=y(f,!1);return d!==void 0?$.get(d,this._key):void 0},u.prototype.set=function(f,d){var h=y(f,!0);return h[this._key]=d,this},u.prototype.delete=function(f){var d=y(f,!1);return d!==void 0?delete d[this._key]:!1},u.prototype.clear=function(){this._key=c()},u}();function c(){var u;do u="@@WeakMap@@"+_();while($.has(s,u));return s[u]=!0,u}function y(u,f){if(!o.call(u,i)){if(!f)return;Object.defineProperty(u,i,{value:$.create()})}return u[i]}function H(u,f){for(var d=0;d<f;++d)u[d]=Math.random()*255|0;return u}function L(u){if(typeof Uint8Array=="function"){var f=new Uint8Array(u);return typeof crypto<"u"?crypto.getRandomValues(f):typeof msCrypto<"u"?msCrypto.getRandomValues(f):H(f,u),f}return H(new Array(u),u)}function _(){var u=L(n);u[6]=u[6]&79|64,u[8]=u[8]&191|128;for(var f="",d=0;d<n;++d){var h=u[d];(d===4||d===6||d===8)&&(f+="-"),h<16&&(f+="0"),f+=h.toString(16).toLowerCase()}return f}}function ue(n){return n.__=void 0,delete n.__,n}})})(Ze||(Ze={}));function g(t,e){return Object.assign(t,e??{})}var Gt=Object.defineProperty,Br=Object.getOwnPropertyDescriptor,Ut=t=>{throw TypeError(t)},qr=(t,e,r)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zr=(t,e,r,o)=>{for(var a=o>1?void 0:o?Br(e,r):e,l=t.length-1,b;l>=0;l--)(b=t[l])&&(a=(o?b(e,r,a):b(a))||a);return o&&a&&Gt(e,r,a),a},Yr=(t,e,r)=>qr(t,e+"",r),Ee=(t,e,r)=>e.has(t)||Ut("Cannot "+r),j=(t,e,r)=>(Ee(t,e,"read from private field"),r?r.call(t):e.get(t)),q=(t,e,r)=>e.has(t)?Ut("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ye=(t,e,r,o)=>(Ee(t,e,"write to private field"),e.set(t,r),r),A=(t,e,r)=>(Ee(t,e,"access private method"),r),W,S,he,pe,ye,k,Nt,Bt,Le,qt,Zt,Yt,Vt;let ge=class extends HTMLCanvasElement{constructor(){super(),q(this,k),Yr(this,"context"),q(this,W,[]),q(this,S,null),q(this,he,({offsetX:t,offsetY:e})=>{const r=new R(t,e),o=A(this,k,Nt).call(this,r);if(o.length>0){const a=A(this,k,Bt).call(this,o),l=A(this,k,Le).call(this,a,r);Ye(this,S,a),l.x||l.y?a.startResize(l):a.startDrag(r)}}),q(this,pe,t=>{const{offsetX:e,offsetY:r}=t,o=new R(e,r);j(this,S)?A(this,k,qt).call(this,o):A(this,k,Zt).call(this,o),this.render()}),q(this,ye,()=>{j(this,S)&&(j(this,S).resizing?j(this,S).stopResize():j(this,S).stopDrag(),Ye(this,S,null),this.render())}),this.context=this.getContext("2d")}addLayer(t){t.setOrder(j(this,W).length),j(this,W).push(t)}connectedCallback(){this.onmousedown=j(this,he),this.onmousemove=j(this,pe),this.onmouseup=j(this,ye)}async render(){if(!this.context)return;this.context.clearRect(0,0,this.width,this.height);const t=j(this,W).filter(e=>e.active).sort((e,r)=>e.order-r.order);for(const e of t)await e.render(),A(this,k,Yt).call(this,e)}setSize(t){this.width=t,this.height=t}};W=new WeakMap;S=new WeakMap;he=new WeakMap;pe=new WeakMap;ye=new WeakMap;k=new WeakSet;Nt=function(t){return j(this,W).filter(e=>t.isCollision(e.rect))};Bt=function(t){return t.reduce((e,r)=>r.order>e.order?r:e)};Le=function(t,e){const o=t.rect;return{x:e.x>=o.x+o.w-10,y:e.y>=o.y+o.h-10}};qt=function(t){j(this,S)&&(j(this,S).resizing?j(this,S).resizeTo(t):j(this,S).dragging&&j(this,S).dragTo(t))};Zt=function(t){let e="default";for(const r of j(this,W))if(r.resizable&&t.isCollision(r.rect)){const o=A(this,k,Le).call(this,r,t);(o.x||o.y)&&(e=o.x&&o.y?"nwse-resize":o.x?"ew-resize":"ns-resize"),r.setHovered(!0)}else r.setHovered(!1);this.style.cursor=e};Yt=function(t){var l;const{width:e,height:r}=t,{x:o,y:a}=t.position;(l=this.context)==null||l.drawImage(t,o,a,e,r),t.hovered&&A(this,k,Vt).call(this,o,a,e,r)};Vt=function(t,e,r,o){const a=new Path2D;a.rect(t,e,r,o),this.context.lineWidth=2,this.context.strokeStyle="rgba(255, 13, 233, 0.4)",this.context.stroke(a)};ge=Zr([p("canvas","cf-canvas")],ge);const J=new ge;Nr(t=>{J.addLayer(t),J.render().then()});Ur(t=>{const e=Math.min(t.current.w,t.current.h),o=Dr(e,t.ideal)>100?t.ideal:e;J.setSize(o),J.render().then()});Wr(t=>{const e=t<1080?540:1080,{clientWidth:r,clientHeight:o}=root;P(Gr({current:{w:r,h:o},ideal:e})),document.documentElement.style.setProperty("--cf-canvas-max-size",`${e}px`)});const Vr=F("layer.create.image"),Qr=I("layer.create.image"),Xr=F("layer.create.text"),Jr=I("layer.create.text");class Qt extends OffscreenCanvas{constructor(r,o,a=0,l=0){super(r,o);M(this,"context");M(this,"_position",new R);M(this,"_offset",new R);M(this,"_draggable",!0);M(this,"_resizable",!0);M(this,"_dragging",!1);M(this,"_resizing",!1);M(this,"_aspectRatio");M(this,"_resizeDirection",{x:!1,y:!1});M(this,"_hovered",!1);M(this,"_active",!0);M(this,"_order",1);this._position=new R(a,l),this.context=this.getContext("2d"),this._aspectRatio=r/o}get position(){return this._position}get dragging(){return this._dragging}get resizing(){return this._resizing}get resizable(){return this._resizable}get hovered(){return this._hovered}get offset(){return this._offset}get active(){return this._active}get order(){return this._order}get rect(){return{x:this.position.x,y:this.position.y,w:this.width,h:this.height}}setActive(r){return this._active=r,this}setOrder(r){return this._order=r,this}setDraggable(r){return this._draggable=r,this}setDragging(r){return this._dragging=r,this}setHovered(r){return this._hovered=r,this}startDrag(r){this.setDragging(!0),this.offset.copy(r).sub(this.position)}dragTo(r){this.dragging&&this.position.copy(r).sub(this.offset)}stopDrag(){this.setDragging(!1)}setResizable(r){return this._resizable=r,this}setResizing(r){return this._resizing=r,this}startResize(r){this.setResizing(!0),this._resizeDirection=r}resizeTo(r){if(this._resizing){const{x:o,y:a}=this._resizeDirection;if(o&&a){const l=r.x-this.position.x,b=r.y-this.position.y,D=Math.max(l/this.width,b/this.height);this.width=this.width*D,this.height=this.height*D}else o?(this.width=Math.max(10,r.x-this.position.x),this.height=this.width/this._aspectRatio):a&&(this.height=Math.max(10,r.y-this.position.y),this.width=this.height*this._aspectRatio);this.render()}}stopResize(){this.setResizing(!1),this._resizeDirection={x:!1,y:!1}}}class Kr extends Qt{constructor(){super(...arguments);M(this,"image",new Image(this.width,this.height))}async render(){var a;if(!((a=this.context)!=null&&a.drawImage))return;this.context.clearRect(0,0,this.width,this.height),await this.image.decode();const{w:r,h:o}=this.rect;this.context.drawImage(this.image,0,0,r,o)}setSrc(r){return this.image.src=r,this}}Qr(t=>{const e=new Image;e.addEventListener("load",async()=>{const{width:r,height:o}=e,a=new Kr(r,o,0,0);a.image.src=t,await a.render(),P(de(a))}),e.src=t});class en extends Qt{constructor(){super(...arguments);M(this,"_text","");M(this,"_color","#111111");M(this,"_font","Mukta");M(this,"_size",3.2);M(this,"_weight","normal")}async render(){var o;if(!((o=this.context)!=null&&o.drawImage))return;this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=this._color,this.context.font=this.font;const r=this._size*10;this.context.fillText(this._text,0,r,this.width)}setText(r){return this._text=r,this}setColor(r){return this._color=r,this}setFont(r){return this._font=r,this}setSize(r){return this._size=r,this}setWeight(r){return this._weight=r,this}get font(){return`${this._weight} ${this._size}em ${this._font}`}}Jr(async({text:t,size:e,color:r,bold:o})=>{const a=new en(t.length*e*5,e*12,0,0);a.setText(t).setSize(e).setColor(r).setResizable(!1),o?(await a.setWeight("bold").render(),P(de(a))):(await a.render(),P(de(a)))});const tn=F("toolbar.selected"),rn=I("toolbar.selected"),nn=F("toolbar.select.image"),sn=I("toolbar.select.image"),an=F("toolbar.select.text"),on=I("toolbar.select.text");function m(t,e,r,o){var a=arguments.length,l=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,o);else for(var D=t.length-1;D>=0;D--)(b=t[D])&&(l=(a<3?b(l):a>3?b(e,r,l):b(e,r))||l);return a>3&&l&&Object.defineProperty(e,r,l),l}function v(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}let Ve=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Ve=m([p("address","web-address"),v("design:paramtypes",[Object])],Ve);let Qe=class extends HTMLAnchorElement{constructor(r={}){super();M(this,"target");M(this,"rel");g(this,r)}};Qe=m([p("a","web-anchor"),v("design:paramtypes",[Object])],Qe);let Xe=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Xe=m([p("article","web-article"),v("design:paramtypes",[Object])],Xe);let Je=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Je=m([p("aside","web-aside"),v("design:paramtypes",[Object])],Je);let Ke=class extends HTMLBRElement{constructor(e={}){super(),g(this,e)}};Ke=m([p("br","web-break"),v("design:paramtypes",[Object])],Ke);let K=class extends HTMLButtonElement{constructor(e={}){super(),g(this,e)}};K=m([p("button","web-button"),v("design:paramtypes",[Object])],K);let et=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};et=m([p("cite","web-cite"),v("design:paramtypes",[Object])],et);let tt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};tt=m([p("code","web-code"),v("design:paramtypes",[Object])],tt);let rt=class extends HTMLDataListElement{constructor(e={}){super(),g(this,e)}};rt=m([p("datalist","web-data-list"),v("design:paramtypes",[Object])],rt);let nt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};nt=m([p("dd","web-description-definition"),v("design:paramtypes",[Object])],nt);let st=class extends HTMLDListElement{constructor(e={}){super(),g(this,e)}};st=m([p("dl","web-description-list"),v("design:paramtypes",[Object])],st);let it=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};it=m([p("dt","web-description-term"),v("design:paramtypes",[Object])],it);let at=class extends HTMLDivElement{constructor(e={}){super(),g(this,e)}};at=m([p("div","web-div"),v("design:paramtypes",[Object])],at);let ot=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ot=m([p("em","web-emphasis"),v("design:paramtypes",[Object])],ot);let ct=class extends HTMLFieldSetElement{constructor(e={}){super(),g(this,e)}};ct=m([p("fieldset","web-fieldset"),v("design:paramtypes",[Object])],ct);let ut=class extends HTMLElement{};ut=m([p("figcaption","web-figcaption")],ut);let lt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};lt=m([p("figure","web-figure"),v("design:paramtypes",[Object])],lt);let me=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};me=m([p("footer","web-footer"),v("design:paramtypes",[Object])],me);let ve=class extends HTMLFormElement{constructor(e={}){super(),g(this,e)}};ve=m([p("form","web-form"),v("design:paramtypes",[Object])],ve);let ft=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ft=m([p("header","web-header"),v("design:paramtypes",[Object])],ft);let dt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};dt=m([p("h1","web-h1"),v("design:paramtypes",[Object])],dt);let ht=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};ht=m([p("h2","web-h2"),v("design:paramtypes",[Object])],ht);let pt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};pt=m([p("h3","web-h3"),v("design:paramtypes",[Object])],pt);let yt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};yt=m([p("h4","web-h4"),v("design:paramtypes",[Object])],yt);let gt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};gt=m([p("h5","web-h5"),v("design:paramtypes",[Object])],gt);let mt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};mt=m([p("h6","web-h6"),v("design:paramtypes",[Object])],mt);let vt=class extends HTMLHRElement{constructor(e={}){super(),g(this,e)}};vt=m([p("hr","web-horizontal-rule"),v("design:paramtypes",[Object])],vt);let G=class extends HTMLInputElement{constructor(e={}){super(),g(this,e)}};G=m([p("input","web-input"),v("design:paramtypes",[Object])],G);let wt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};wt=m([p("kbd","web-keyboard"),v("design:paramtypes",[Object])],wt);let bt=class extends HTMLLabelElement{constructor(e={}){super(),g(this,e)}};bt=m([p("label","web-label"),v("design:paramtypes",[Object])],bt);let _t=class extends HTMLLIElement{constructor(e={}){super(),g(this,e)}};_t=m([p("li","web-list-item"),v("design:paramtypes",[Object])],_t);let xt=class extends HTMLOListElement{constructor(e={}){super(),g(this,e)}};xt=m([p("ol","web-ordered-list"),v("design:paramtypes",[Object])],xt);let Mt=class extends HTMLUListElement{constructor(e={}){super(),g(this,e)}};Mt=m([p("ul","web-unordered-list"),v("design:paramtypes",[Object])],Mt);let Ot=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Ot=m([p("main","web-main"),v("design:paramtypes",[Object])],Ot);let Tt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Tt=m([p("mark","web-mark"),v("design:paramtypes",[Object])],Tt);let Et=class extends HTMLMenuElement{constructor(e={}){super(),g(this,e)}};Et=m([p("menu","web-menu"),v("design:paramtypes",[Object])],Et);let Lt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Lt=m([p("nav","web-nav"),v("design:paramtypes",[Object])],Lt);let le=class extends HTMLObjectElement{constructor(e={}){super(),g(this,e)}};le=m([p("object","web-object"),v("design:paramtypes",[le])],le);let Ht=class extends HTMLParagraphElement{constructor(e={}){super(),g(this,e)}};Ht=m([p("p","web-paragraph"),v("design:paramtypes",[Object])],Ht);let jt=class extends HTMLPreElement{constructor(e={}){super(),g(this,e)}};jt=m([p("pre","web-preformatted"),v("design:paramtypes",[Object])],jt);let St=class extends HTMLProgressElement{constructor(e={}){super(),g(this,e)}};St=m([p("progress","web-progress"),v("design:paramtypes",[Object])],St);let Pt=class extends HTMLQuoteElement{constructor(e={}){super(),g(this,e)}};Pt=m([p("blockquote","web-blockquote"),v("design:paramtypes",[Object])],Pt);let Dt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Dt=m([p("section","web-section"),v("design:paramtypes",[Object])],Dt);let Ct=class extends HTMLSelectElement{constructor(e={}){super(),g(this,e)}};Ct=m([p("select","web-select"),v("design:paramtypes",[Object])],Ct);let zt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};zt=m([p("small","web-small"),v("design:paramtypes",[Object])],zt);let kt=class extends HTMLSpanElement{constructor(e={}){super(),g(this,e)}};kt=m([p("span","web-span"),v("design:paramtypes",[Object])],kt);let Rt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Rt=m([p("strong","web-strong"),v("design:paramtypes",[Object])],Rt);let It=class extends HTMLTimeElement{constructor(e={}){super(),g(this,e)}};It=m([p("time","web-time"),v("design:paramtypes",[Object])],It);sn(()=>{const t=new G({type:"file",accept:"image/svg+xml,image/png",onchange(){const[e]=t.files??[];e&&Pr(e).then(r=>{P(Vr(r))})}});t.click()});const cn=F("form.text.submit"),un=I("form.text.submit");un(async t=>{P(Xr(t))});var ln=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,Xt=t=>{throw TypeError(t)},dn=(t,e,r,o)=>{for(var a=o>1?void 0:o?fn(e,r):e,l=t.length-1,b;l>=0;l--)(b=t[l])&&(a=(o?b(e,r,a):b(a))||a);return o&&a&&ln(e,r,a),a},hn=(t,e,r)=>e.has(t)||Xt("Cannot "+r),pn=(t,e,r)=>e.has(t)?Xt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ft=(t,e,r)=>(hn(t,e,"access private method"),r),re,we;let be=class extends HTMLDialogElement{constructor(t={}){super(),pn(this,re),g(this,t),Ft(this,re,we).call(this,"normal")}close(t){Ft(this,re,we).call(this,"reverse").addEventListener("finish",()=>{this.close(t),this.remove()})}};re=new WeakSet;we=function(t){return this.animate([{transform:"translateY(1000px) scaleY(2.5) scaleX(0.2)",transformOrigin:"50% 100%",filter:"blur(40px)",opacity:"0"},{transform:"translateY(0) scaleY(1) scaleX(1)",transformOrigin:"50% 50%",filter:"blur(0)",opacity:"1"}],{direction:t,duration:600,easing:"cubic-bezier(0.23, 1, 0.32, 1)"})};be=dn([p("dialog","web-dialog")],be);var yn=Object.defineProperty,gn=Object.getOwnPropertyDescriptor,mn=(t,e,r,o)=>{for(var a=o>1?void 0:o?gn(e,r):e,l=t.length-1,b;l>=0;l--)(b=t[l])&&(a=(o?b(e,r,a):b(a))||a);return o&&a&&yn(e,r,a),a};let _e=class extends ve{constructor(t,e={}){super(e),this.controls=t,this.append(...Wt(this.controls))}get value(){return Ir(this)}};_e=mn([p("form","cf-form-group")],_e);var vn=Object.defineProperty,wn=Object.getOwnPropertyDescriptor,bn=(t,e,r,o)=>{for(var a=o>1?void 0:o?wn(e,r):e,l=t.length-1,b;l>=0;l--)(b=t[l])&&(a=(o?b(e,r,a):b(a))||a);return o&&a&&vn(e,r,a),a};let xe=class extends be{constructor(e,r,o={}){super();M(this,"form");M(this,"actions");g(this,o),this.form=new _e(e,{onsubmit:l=>{l.preventDefault(),P(r(this.form.value)),this.close()}}),this.actions={confirm:new K({type:"submit",textContent:"Confirm"}),cancel:new K({type:"button",textContent:"Cancel",onclick:()=>{this.close("cancel")}})};const a=new me;a.append(...Rr(this.actions)),this.form.append(a),this.append(this.form)}connectedCallback(){setTimeout(()=>{document.addEventListener("click",e=>{const r=e.target;this.form.contains(r)||this.close()})})}};xe=bn([p("dialog","cf-form-dialog")],xe);on(()=>{const t=new G({type:"text",name:"text",placeholder:"Texto",required:!0}),e=new G({type:"number",name:"size",step:"0.1",value:"4.8"}),r=new G({type:"checkbox",name:"bold",value:"true",checked:!1}),o=new G({type:"color",name:"color",value:"#000000"}),a={text:t,size:e,color:o,bold:r},l=new xe(a,cn);document.body.insertAdjacentElement("beforeend",l),l.showModal()});rn(t=>{switch(t){case"image":return P(nn());case"text":return P(an())}});const $t={image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z" /> </svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M420-160v-520H200v-120h560v120H540v520H420Z"/> </svg>'};var Jt=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,Kt=t=>{throw TypeError(t)},xn=(t,e,r)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mn=(t,e,r,o)=>{for(var a=o>1?void 0:o?_n(e,r):e,l=t.length-1,b;l>=0;l--)(b=t[l])&&(a=(o?b(e,r,a):b(a))||a);return o&&a&&Jt(e,r,a),a},On=(t,e,r)=>xn(t,e+"",r),Tn=(t,e,r)=>e.has(t)||Kt("Cannot "+r),En=(t,e,r)=>e.has(t)?Kt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),At=(t,e,r)=>(Tn(t,e,"access private method"),r),ne,Me;let Oe=class extends HTMLMenuElement{constructor(){super(...arguments),En(this,ne),On(this,"buttons",{image:At(this,ne,Me).call(this,$t.image,"image","Select image"),text:At(this,ne,Me).call(this,$t.text,"text","Write text")})}connectedCallback(){for(const t of Wt(this.buttons))this.append(t),t.addEventListener("click",()=>{const e=t.value;P(tn(e))})}};ne=new WeakSet;Me=function(t,e,r){return new K({innerHTML:t,value:e,title:r,type:"button"})};Oe=Mn([p("menu","cf-toolbar")],Oe);const Ln=()=>{const t=new Oe,e=()=>Math.min(innerWidth,innerHeight);P(Be(e())),onresize=Fr(()=>P(Be(e())),250),root.append(t,J)};Sr("Mukta",[400,600,800]).then(Ln);
