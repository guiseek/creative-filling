var mr=Object.defineProperty;var gr=(t,e,r)=>e in t?mr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var O=(t,e,r)=>gr(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function r(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(a){if(a.ep)return;a.ep=!0;const f=r(a);fetch(a.href,f)}})();const Ft=t=>Object.values(t),wr=t=>new Promise(t),vr=t=>Promise.all(t),br=async(t,e)=>{const r=e.map(String).map(o=>{const a=`url(./fonts/${t}-${o}.woff2)`;return new FontFace(t,a,{weight:o,style:"normal"}).load()});return(await vr(r)).map(o=>document.fonts.add(o))},_r=t=>wr((e,r)=>{const o=new FileReader;o.addEventListener("error",()=>{const a="Error on load image of type";r(new DOMException(`${a}: ${t.type}`))}),o.addEventListener("loadend",()=>{typeof o.result=="string"&&e(o.result)}),o.readAsDataURL(t)}),Mr=(t,e)=>t/e*100;class k{constructor(e=0,r=0){O(this,"isCollision",e=>{const r=e,o=new k(r.x,r.y),a=new k(e.w,e.h),f=o.add(a);return this.x>=r.x&&this.y>=r.y&&this.x<=f.x&&this.y<=f.y});this.x=e,this.y=r}set(e,r){this.x=e,this.y=r}clone(){return new k(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}}const xr=t=>Object.fromEntries(new FormData(t).entries()),Or=t=>Object.entries(t),Q={string(t){return typeof t=="string"},number(t){return typeof t=="number"&&!isNaN(t)},date(t){return t instanceof Date&&t.toString()!=="Invalid Date"||!isNaN(new Date(String(t)).getTime())},boolean(t){return t===!0||t===!1||t==="true"||t==="false"},object(t){return typeof t=="object"&&t!==null},array(t){return Array.isArray(t)},function(t){return typeof t=="function"},class(t){return typeof t=="function"&&typeof t.prototype=="object"&&"constructor"in t.prototype}},Tr=t=>t==null?null:Q.boolean(t)?t==="true"||t===!0:Q.number(t)?t:typeof t=="string"&&Q.number(+t)?+t:Q.date(t)?new Date(t.toString()):(Q.string(t),t),Er=t=>Object.values(t),Lr=t=>{const e=t instanceof HTMLFormElement?xr(t):t;return Or(e).reduce((r,[o,a])=>({...r,[o]:Tr(a)}),e)};function Hr(t,e=1e3){let r=new Date().getTime(),o,a;return f=>{const y=new Date().getTime();o=f,y-r>=e?(r=y,t(f)):(clearTimeout(a),a=window.setTimeout(()=>{r=new Date().getTime(),t(o)},e-(y-r)))}}const fe=new Map,jr=(t,e)=>{const r=Oe(t);return fe.set(t,r.add(e)),()=>{r.delete(e),fe.set(t,r)}},Oe=t=>fe.get(t)??new Set,R=t=>e=>jr(t,e);class Sr{constructor(e,r){O(this,"type");O(this,"value");this.type=e,this.value=r}}const I=t=>e=>new class extends Sr{constructor(){super(t,e)}dispatch(){for(const r of Oe(this.type))r(this.value)}},D=t=>{for(const e of Oe(t.type))e(t.value)},Ue=I("window.resize"),Pr=R("window.resize"),Dr=I("canvas.update.size"),Cr=R("canvas.update.size"),de=I("canvas.add.layer"),zr=R("canvas.add.layer"),p=(t,e)=>r=>{customElements.define(e,r,{extends:t})};var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Be;(function(t){(function(e){var r=typeof globalThis=="object"?globalThis:typeof Ne=="object"?Ne:typeof self=="object"?self:typeof this=="object"?this:S(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),e(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(W,B){return function(F,q){Object.defineProperty(W,F,{configurable:!0,writable:!0,value:q}),B&&B(F,q)}}function f(){try{return Function("return this;")()}catch{}}function y(){try{return(0,eval)("(function() { return this; })()")}catch{}}function S(){return f()||y()}})(function(e,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",f=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",y=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",S=typeof Object.create=="function",W={__proto__:[]}instanceof Array,B=!S&&!W,F={create:S?function(){return ce(Object.create(null))}:W?function(){return ce({__proto__:null})}:function(){return ce({})},has:B?function(n,s){return o.call(n,s)}:function(n,s){return s in n},get:B?function(n,s){return o.call(n,s)?n[s]:void 0}:function(n,s){return n[s]}},q=Object.getPrototypeOf(Function),Z=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:fr(),ne=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:dr(),se=typeof WeakMap=="function"?WeakMap:hr(),G=a?Symbol.for("@reflect-metadata:registry"):void 0,J=cr(),Ee=ur(J);function Nt(n,s,i,c){if(b(i)){if(!ke(n))throw new TypeError;if(!Re(s))throw new TypeError;return er(n,s)}else{if(!ke(n))throw new TypeError;if(!E(s))throw new TypeError;if(!E(c)&&!b(c)&&!U(c))throw new TypeError;return U(c)&&(c=void 0),i=z(i),tr(n,s,i,c)}}e("decorate",Nt);function Bt(n,s){function i(c,m){if(!E(c))throw new TypeError;if(!b(m)&&!ar(m))throw new TypeError;Se(n,s,c,m)}return i}e("metadata",Bt);function qt(n,s,i,c){if(!E(i))throw new TypeError;return b(c)||(c=z(c)),Se(n,s,i,c)}e("defineMetadata",qt);function Zt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),Le(n,s,i)}e("hasMetadata",Zt);function Vt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),ie(n,s,i)}e("hasOwnMetadata",Vt);function Qt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),He(n,s,i)}e("getMetadata",Qt);function Xt(n,s,i){if(!E(s))throw new TypeError;return b(i)||(i=z(i)),je(n,s,i)}e("getOwnMetadata",Xt);function Yt(n,s){if(!E(n))throw new TypeError;return b(s)||(s=z(s)),Pe(n,s)}e("getMetadataKeys",Yt);function Jt(n,s){if(!E(n))throw new TypeError;return b(s)||(s=z(s)),De(n,s)}e("getOwnMetadataKeys",Jt);function Kt(n,s,i){if(!E(s))throw new TypeError;if(b(i)||(i=z(i)),!E(s))throw new TypeError;b(i)||(i=z(i));var c=V(s,i,!1);return b(c)?!1:c.OrdinaryDeleteMetadata(n,s,i)}e("deleteMetadata",Kt);function er(n,s){for(var i=n.length-1;i>=0;--i){var c=n[i],m=c(s);if(!b(m)&&!U(m)){if(!Re(m))throw new TypeError;s=m}}return s}function tr(n,s,i,c){for(var m=n.length-1;m>=0;--m){var H=n[m],L=H(s,i,c);if(!b(L)&&!U(L)){if(!E(L))throw new TypeError;c=L}}return c}function Le(n,s,i){var c=ie(n,s,i);if(c)return!0;var m=oe(s);return U(m)?!1:Le(n,m,i)}function ie(n,s,i){var c=V(s,i,!1);return b(c)?!1:ze(c.OrdinaryHasOwnMetadata(n,s,i))}function He(n,s,i){var c=ie(n,s,i);if(c)return je(n,s,i);var m=oe(s);if(!U(m))return He(n,m,i)}function je(n,s,i){var c=V(s,i,!1);if(!b(c))return c.OrdinaryGetOwnMetadata(n,s,i)}function Se(n,s,i,c){var m=V(i,c,!0);m.OrdinaryDefineOwnMetadata(n,s,i,c)}function Pe(n,s){var i=De(n,s),c=oe(n);if(c===null)return i;var m=Pe(c,s);if(m.length<=0)return i;if(i.length<=0)return m;for(var H=new ne,L=[],_=0,u=i;_<u.length;_++){var l=u[_],d=H.has(l);d||(H.add(l),L.push(l))}for(var h=0,M=m;h<M.length;h++){var l=M[h],d=H.has(l);d||(H.add(l),L.push(l))}return L}function De(n,s){var i=V(n,s,!1);return i?i.OrdinaryOwnMetadataKeys(n,s):[]}function Ce(n){if(n===null)return 1;switch(typeof n){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return n===null?1:6;default:return 6}}function b(n){return n===void 0}function U(n){return n===null}function rr(n){return typeof n=="symbol"}function E(n){return typeof n=="object"?n!==null:typeof n=="function"}function nr(n,s){switch(Ce(n)){case 0:return n;case 1:return n;case 2:return n;case 3:return n;case 4:return n;case 5:return n}var i="string",c=Ie(n,f);if(c!==void 0){var m=c.call(n,i);if(E(m))throw new TypeError;return m}return sr(n)}function sr(n,s){var i,c;{var m=n.toString;if(K(m)){var c=m.call(n);if(!E(c))return c}var i=n.valueOf;if(K(i)){var c=i.call(n);if(!E(c))return c}}throw new TypeError}function ze(n){return!!n}function ir(n){return""+n}function z(n){var s=nr(n);return rr(s)?s:ir(s)}function ke(n){return Array.isArray?Array.isArray(n):n instanceof Object?n instanceof Array:Object.prototype.toString.call(n)==="[object Array]"}function K(n){return typeof n=="function"}function Re(n){return typeof n=="function"}function ar(n){switch(Ce(n)){case 3:return!0;case 4:return!0;default:return!1}}function ae(n,s){return n===s||n!==n&&s!==s}function Ie(n,s){var i=n[s];if(i!=null){if(!K(i))throw new TypeError;return i}}function Fe(n){var s=Ie(n,y);if(!K(s))throw new TypeError;var i=s.call(n);if(!E(i))throw new TypeError;return i}function Ae(n){return n.value}function $e(n){var s=n.next();return s.done?!1:s}function We(n){var s=n.return;s&&s.call(n)}function oe(n){var s=Object.getPrototypeOf(n);if(typeof n!="function"||n===q||s!==q)return s;var i=n.prototype,c=i&&Object.getPrototypeOf(i);if(c==null||c===Object.prototype)return s;var m=c.constructor;return typeof m!="function"||m===n?s:m}function or(){var n;!b(G)&&typeof r.Reflect<"u"&&!(G in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(n=lr(r.Reflect));var s,i,c,m=new se,H={registerProvider:L,getProvider:u,setProvider:d};return H;function L(h){if(!Object.isExtensible(H))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case n===h:break;case b(s):s=h;break;case s===h:break;case b(i):i=h;break;case i===h:break;default:c===void 0&&(c=new ne),c.add(h);break}}function _(h,M){if(!b(s)){if(s.isProviderFor(h,M))return s;if(!b(i)){if(i.isProviderFor(h,M))return s;if(!b(c))for(var x=Fe(c);;){var T=$e(x);if(!T)return;var C=Ae(T);if(C.isProviderFor(h,M))return We(x),C}}}if(!b(n)&&n.isProviderFor(h,M))return n}function u(h,M){var x=m.get(h),T;return b(x)||(T=x.get(M)),b(T)&&(T=_(h,M),b(T)||(b(x)&&(x=new Z,m.set(h,x)),x.set(M,T))),T}function l(h){if(b(h))throw new TypeError;return s===h||i===h||!b(c)&&c.has(h)}function d(h,M,x){if(!l(x))throw new Error("Metadata provider not registered.");var T=u(h,M);if(T!==x){if(!b(T))return!1;var C=m.get(h);b(C)&&(C=new Z,m.set(h,C)),C.set(M,x)}return!0}}function cr(){var n;return!b(G)&&E(r.Reflect)&&Object.isExtensible(r.Reflect)&&(n=r.Reflect[G]),b(n)&&(n=or()),!b(G)&&E(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,G,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}function ur(n){var s=new se,i={isProviderFor:function(l,d){var h=s.get(l);return b(h)?!1:h.has(d)},OrdinaryDefineOwnMetadata:L,OrdinaryHasOwnMetadata:m,OrdinaryGetOwnMetadata:H,OrdinaryOwnMetadataKeys:_,OrdinaryDeleteMetadata:u};return J.registerProvider(i),i;function c(l,d,h){var M=s.get(l),x=!1;if(b(M)){if(!h)return;M=new Z,s.set(l,M),x=!0}var T=M.get(d);if(b(T)){if(!h)return;if(T=new Z,M.set(d,T),!n.setProvider(l,d,i))throw M.delete(d),x&&s.delete(l),new Error("Wrong provider for target.")}return T}function m(l,d,h){var M=c(d,h,!1);return b(M)?!1:ze(M.has(l))}function H(l,d,h){var M=c(d,h,!1);if(!b(M))return M.get(l)}function L(l,d,h,M){var x=c(h,M,!0);x.set(l,d)}function _(l,d){var h=[],M=c(l,d,!1);if(b(M))return h;for(var x=M.keys(),T=Fe(x),C=0;;){var Ge=$e(T);if(!Ge)return h.length=C,h;var pr=Ae(Ge);try{h[C]=pr}catch(yr){try{We(T)}finally{throw yr}}C++}}function u(l,d,h){var M=c(d,h,!1);if(b(M)||!M.delete(l))return!1;if(M.size===0){var x=s.get(d);b(x)||(x.delete(h),x.size===0&&s.delete(x))}return!0}}function lr(n){var s=n.defineMetadata,i=n.hasOwnMetadata,c=n.getOwnMetadata,m=n.getOwnMetadataKeys,H=n.deleteMetadata,L=new se,_={isProviderFor:function(u,l){var d=L.get(u);return!b(d)&&d.has(l)?!0:m(u,l).length?(b(d)&&(d=new ne,L.set(u,d)),d.add(l),!0):!1},OrdinaryDefineOwnMetadata:s,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:m,OrdinaryDeleteMetadata:H};return _}function V(n,s,i){var c=J.getProvider(n,s);if(!b(c))return c;if(i){if(J.setProvider(n,s,Ee))return Ee;throw new Error("Illegal state.")}}function fr(){var n={},s=[],i=function(){function _(u,l,d){this._index=0,this._keys=u,this._values=l,this._selector=d}return _.prototype["@@iterator"]=function(){return this},_.prototype[y]=function(){return this},_.prototype.next=function(){var u=this._index;if(u>=0&&u<this._keys.length){var l=this._selector(this._keys[u],this._values[u]);return u+1>=this._keys.length?(this._index=-1,this._keys=s,this._values=s):this._index++,{value:l,done:!1}}return{value:void 0,done:!0}},_.prototype.throw=function(u){throw this._index>=0&&(this._index=-1,this._keys=s,this._values=s),u},_.prototype.return=function(u){return this._index>=0&&(this._index=-1,this._keys=s,this._values=s),{value:u,done:!0}},_}(),c=function(){function _(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(_.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_.prototype.has=function(u){return this._find(u,!1)>=0},_.prototype.get=function(u){var l=this._find(u,!1);return l>=0?this._values[l]:void 0},_.prototype.set=function(u,l){var d=this._find(u,!0);return this._values[d]=l,this},_.prototype.delete=function(u){var l=this._find(u,!1);if(l>=0){for(var d=this._keys.length,h=l+1;h<d;h++)this._keys[h-1]=this._keys[h],this._values[h-1]=this._values[h];return this._keys.length--,this._values.length--,ae(u,this._cacheKey)&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},_.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},_.prototype.keys=function(){return new i(this._keys,this._values,m)},_.prototype.values=function(){return new i(this._keys,this._values,H)},_.prototype.entries=function(){return new i(this._keys,this._values,L)},_.prototype["@@iterator"]=function(){return this.entries()},_.prototype[y]=function(){return this.entries()},_.prototype._find=function(u,l){if(!ae(this._cacheKey,u)){this._cacheIndex=-1;for(var d=0;d<this._keys.length;d++)if(ae(this._keys[d],u)){this._cacheIndex=d;break}}return this._cacheIndex<0&&l&&(this._cacheIndex=this._keys.length,this._keys.push(u),this._values.push(void 0)),this._cacheIndex},_}();return c;function m(_,u){return _}function H(_,u){return u}function L(_,u){return[_,u]}}function dr(){var n=function(){function s(){this._map=new Z}return Object.defineProperty(s.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),s.prototype.has=function(i){return this._map.has(i)},s.prototype.add=function(i){return this._map.set(i,i),this},s.prototype.delete=function(i){return this._map.delete(i)},s.prototype.clear=function(){this._map.clear()},s.prototype.keys=function(){return this._map.keys()},s.prototype.values=function(){return this._map.keys()},s.prototype.entries=function(){return this._map.entries()},s.prototype["@@iterator"]=function(){return this.keys()},s.prototype[y]=function(){return this.keys()},s}();return n}function hr(){var n=16,s=F.create(),i=c();return function(){function u(){this._key=c()}return u.prototype.has=function(l){var d=m(l,!1);return d!==void 0?F.has(d,this._key):!1},u.prototype.get=function(l){var d=m(l,!1);return d!==void 0?F.get(d,this._key):void 0},u.prototype.set=function(l,d){var h=m(l,!0);return h[this._key]=d,this},u.prototype.delete=function(l){var d=m(l,!1);return d!==void 0?delete d[this._key]:!1},u.prototype.clear=function(){this._key=c()},u}();function c(){var u;do u="@@WeakMap@@"+_();while(F.has(s,u));return s[u]=!0,u}function m(u,l){if(!o.call(u,i)){if(!l)return;Object.defineProperty(u,i,{value:F.create()})}return u[i]}function H(u,l){for(var d=0;d<l;++d)u[d]=Math.random()*255|0;return u}function L(u){if(typeof Uint8Array=="function"){var l=new Uint8Array(u);return typeof crypto<"u"?crypto.getRandomValues(l):typeof msCrypto<"u"?msCrypto.getRandomValues(l):H(l,u),l}return H(new Array(u),u)}function _(){var u=L(n);u[6]=u[6]&79|64,u[8]=u[8]&191|128;for(var l="",d=0;d<n;++d){var h=u[d];(d===4||d===6||d===8)&&(l+="-"),h<16&&(l+="0"),l+=h.toString(16).toLowerCase()}return l}}function ce(n){return n.__=void 0,delete n.__,n}})})(Be||(Be={}));function g(t,e){return Object.assign(t,e??{})}var At=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,$t=t=>{throw TypeError(t)},Rr=(t,e,r)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ir=(t,e,r,o)=>{for(var a=o>1?void 0:o?kr(e,r):e,f=t.length-1,y;f>=0;f--)(y=t[f])&&(a=(o?y(e,r,a):y(a))||a);return o&&a&&At(e,r,a),a},ee=(t,e,r)=>Rr(t,typeof e!="symbol"?e+"":e,r),Te=(t,e,r)=>e.has(t)||$t("Cannot "+r),j=(t,e,r)=>(Te(t,e,"read from private field"),r?r.call(t):e.get(t)),N=(t,e,r)=>e.has(t)?$t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ue=(t,e,r,o)=>(Te(t,e,"write to private field"),e.set(t,r),r),qe=(t,e,r)=>(Te(t,e,"access private method"),r),A,P,he,pe,te,ye,me;let ge=class extends HTMLCanvasElement{constructor(){super(),N(this,te),ee(this,"context"),N(this,A,[]),N(this,P,null),ee(this,"addLayer",t=>{t.setOrder(j(this,A).length),j(this,A).push(t)}),ee(this,"render",async()=>{this.context&&(this.context.clearRect(0,0,this.width,this.height),j(this,A).filter(t=>t.active).sort((t,e)=>t.order-e.order).map(async t=>{var f;await t.render();const{width:e,height:r}=t,{x:o,y:a}=t.position;(f=this.context)==null||f.drawImage(t,o,a,e,r)}))}),ee(this,"setSize",t=>{this.width=t,this.height=t}),N(this,he,({offsetX:t,offsetY:e})=>{const r=new k(t,e),o=j(this,A).filter(({rect:a})=>r.isCollision(a));if(o.length>0){const a=o.reduce((y,S)=>S.order>y.order?S:y,o[0]),f=qe(this,te,ye).call(this,a,r);f.x||f.y?(ue(this,P,a),a.startResize(f)):(ue(this,P,a),a.startDrag(r))}}),N(this,pe,t=>{const{offsetX:e,offsetY:r}=t,o=new k(e,r);if(j(this,P)&&j(this,P).dragging)j(this,P).dragTo(o),this.render();else if(j(this,P)&&j(this,P).resizing)j(this,P).resizeTo(o),this.render();else{const a=j(this,A).filter(({rect:y})=>o.isCollision(y)),f=a.reduce((y,S)=>S.order>y.order?S:y,a[0]);if(f){const y=qe(this,te,ye).call(this,f,o);y.x||y.y?this.style.cursor=y.x&&y.y?"nwse-resize":y.x?"ew-resize":"ns-resize":this.style.cursor="default"}else this.style.cursor="default"}}),N(this,me,()=>{j(this,P)&&(j(this,P).resizing?j(this,P).stopResize():j(this,P).stopDrag(),ue(this,P,null),this.render().then())}),this.context=this.getContext("2d")}connectedCallback(){this.onmousedown=j(this,he),this.onmousemove=j(this,pe),this.onmouseup=j(this,me)}};A=new WeakMap;P=new WeakMap;he=new WeakMap;pe=new WeakMap;te=new WeakSet;ye=function(t,e){const o=t.rect;return{x:e.x>=o.x+o.w-10,y:e.y>=o.y+o.h-10}};me=new WeakMap;ge=Ir([p("canvas","cf-canvas")],ge);const X=new ge;zr(t=>{X.addLayer(t),X.render().then()});Cr(t=>{const e=Math.min(t.current.w,t.current.h),o=Mr(e,t.ideal)>100?t.ideal:e;X.setSize(o),X.render().then()});Pr(t=>{const e=t<1080?540:1080,{clientWidth:r,clientHeight:o}=root;D(Dr({current:{w:r,h:o},ideal:e})),document.documentElement.style.setProperty("--cf-canvas-max-size",`${e}px`)});const Fr=I("layer.create.image"),Ar=R("layer.create.image"),$r=I("layer.create.text"),Wr=R("layer.create.text");class Wt extends OffscreenCanvas{constructor(r,o,a=0,f=0){super(r,o);O(this,"context");O(this,"_position",new k);O(this,"_offset",new k);O(this,"_draggable",!0);O(this,"_resizable",!0);O(this,"_dragging",!1);O(this,"_resizing",!1);O(this,"_aspectRatio");O(this,"_resizeDirection",{x:!1,y:!1});O(this,"_active",!0);O(this,"_order",1);this._position=new k(a,f),this.context=this.getContext("2d"),this._aspectRatio=r/o}get position(){return this._position}get dragging(){return this._dragging}get resizing(){return this._resizing}get offset(){return this._offset}get active(){return this._active}get order(){return this._order}get rect(){return{x:this.position.x,y:this.position.y,w:this.width,h:this.height}}setActive(r){return this._active=r,this}setOrder(r){return this._order=r,this}setDraggable(r){return this._draggable=r,this}setDragging(r){return this._dragging=r,this}startDrag(r){this.setDragging(!0),this.offset.copy(r).sub(this.position)}dragTo(r){this.dragging&&this.position.copy(r).sub(this.offset)}stopDrag(){this.setDragging(!1)}setResizable(r){return this._resizable=r,this}setResizing(r){return this._resizing=r,this}startResize(r){this.setResizing(!0),this._resizeDirection=r}resizeTo(r){if(this._resizing){const{x:o,y:a}=this._resizeDirection;if(o&&a){const f=r.x-this.position.x,y=r.y-this.position.y,S=Math.max(f/this.width,y/this.height);this.width=this.width*S,this.height=this.height*S}else o?(this.width=Math.max(10,r.x-this.position.x),this.height=this.width/this._aspectRatio):a&&(this.height=Math.max(10,r.y-this.position.y),this.width=this.height*this._aspectRatio);this.render()}}stopResize(){this.setResizing(!1),this._resizeDirection={x:!1,y:!1}}}class Gr extends Wt{constructor(){super(...arguments);O(this,"image",new Image(this.width,this.height))}async render(){var a;if(!((a=this.context)!=null&&a.drawImage))return;this.context.clearRect(0,0,this.width,this.height),await this.image.decode();const{w:r,h:o}=this.rect;this.context.drawImage(this.image,0,0,r,o)}setSrc(r){return this.image.src=r,this}}Ar(t=>{const e=new Image;e.addEventListener("load",async()=>{const{width:r,height:o}=e,a=new Gr(r,o,0,0);a.image.src=t,await a.render(),D(de(a))}),e.src=t});class Ur extends Wt{constructor(){super(...arguments);O(this,"_text","");O(this,"_color","#111111");O(this,"_font","Mukta");O(this,"_size",3.2);O(this,"_weight","normal")}async render(){var o;if(!((o=this.context)!=null&&o.drawImage))return;this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=this._color,this.context.font=this.font;const r=this._size*10;this.context.fillText(this._text,0,r,this.width)}setText(r){return this._text=r,this}setColor(r){return this._color=r,this}setFont(r){return this._font=r,this}setSize(r){return this._size=r,this}setWeight(r){return this._weight=r,this}get font(){return`${this._weight} ${this._size}em ${this._font}`}}Wr(async({text:t,size:e,color:r,bold:o})=>{const a=new Ur(540,540,0,0);a.setText(t).setSize(e).setColor(r),o?(await a.setWeight("bold").render(),D(de(a))):(await a.render(),D(de(a)))});const Nr=I("toolbar.selected"),Br=R("toolbar.selected"),qr=I("toolbar.select.image"),Zr=R("toolbar.select.image"),Vr=I("toolbar.select.text"),Qr=R("toolbar.select.text");function w(t,e,r,o){var a=arguments.length,f=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,e,r,o);else for(var S=t.length-1;S>=0;S--)(y=t[S])&&(f=(a<3?y(f):a>3?y(e,r,f):y(e,r))||f);return a>3&&f&&Object.defineProperty(e,r,f),f}function v(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}let Ze=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Ze=w([p("address","web-address"),v("design:paramtypes",[Object])],Ze);let Ve=class extends HTMLAnchorElement{constructor(r={}){super();O(this,"target");O(this,"rel");g(this,r)}};Ve=w([p("a","web-anchor"),v("design:paramtypes",[Object])],Ve);let Qe=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Qe=w([p("article","web-article"),v("design:paramtypes",[Object])],Qe);let Xe=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Xe=w([p("aside","web-aside"),v("design:paramtypes",[Object])],Xe);let Ye=class extends HTMLBRElement{constructor(e={}){super(),g(this,e)}};Ye=w([p("br","web-break"),v("design:paramtypes",[Object])],Ye);let Y=class extends HTMLButtonElement{constructor(e={}){super(),g(this,e)}};Y=w([p("button","web-button"),v("design:paramtypes",[Object])],Y);let Je=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Je=w([p("cite","web-cite"),v("design:paramtypes",[Object])],Je);let Ke=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Ke=w([p("code","web-code"),v("design:paramtypes",[Object])],Ke);let et=class extends HTMLDataListElement{constructor(e={}){super(),g(this,e)}};et=w([p("datalist","web-data-list"),v("design:paramtypes",[Object])],et);let tt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};tt=w([p("dd","web-description-definition"),v("design:paramtypes",[Object])],tt);let rt=class extends HTMLDListElement{constructor(e={}){super(),g(this,e)}};rt=w([p("dl","web-description-list"),v("design:paramtypes",[Object])],rt);let nt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};nt=w([p("dt","web-description-term"),v("design:paramtypes",[Object])],nt);let st=class extends HTMLDivElement{constructor(e={}){super(),g(this,e)}};st=w([p("div","web-div"),v("design:paramtypes",[Object])],st);let it=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};it=w([p("em","web-emphasis"),v("design:paramtypes",[Object])],it);let at=class extends HTMLFieldSetElement{constructor(e={}){super(),g(this,e)}};at=w([p("fieldset","web-fieldset"),v("design:paramtypes",[Object])],at);let ot=class extends HTMLElement{};ot=w([p("figcaption","web-figcaption")],ot);let ct=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ct=w([p("figure","web-figure"),v("design:paramtypes",[Object])],ct);let we=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};we=w([p("footer","web-footer"),v("design:paramtypes",[Object])],we);let ve=class extends HTMLFormElement{constructor(e={}){super(),g(this,e)}};ve=w([p("form","web-form"),v("design:paramtypes",[Object])],ve);let ut=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};ut=w([p("header","web-header"),v("design:paramtypes",[Object])],ut);let lt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};lt=w([p("h1","web-h1"),v("design:paramtypes",[Object])],lt);let ft=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};ft=w([p("h2","web-h2"),v("design:paramtypes",[Object])],ft);let dt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};dt=w([p("h3","web-h3"),v("design:paramtypes",[Object])],dt);let ht=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};ht=w([p("h4","web-h4"),v("design:paramtypes",[Object])],ht);let pt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};pt=w([p("h5","web-h5"),v("design:paramtypes",[Object])],pt);let yt=class extends HTMLHeadingElement{constructor(e={}){super(),g(this,e)}};yt=w([p("h6","web-h6"),v("design:paramtypes",[Object])],yt);let mt=class extends HTMLHRElement{constructor(e={}){super(),g(this,e)}};mt=w([p("hr","web-horizontal-rule"),v("design:paramtypes",[Object])],mt);let $=class extends HTMLInputElement{constructor(e={}){super(),g(this,e)}};$=w([p("input","web-input"),v("design:paramtypes",[Object])],$);let gt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};gt=w([p("kbd","web-keyboard"),v("design:paramtypes",[Object])],gt);let wt=class extends HTMLLabelElement{constructor(e={}){super(),g(this,e)}};wt=w([p("label","web-label"),v("design:paramtypes",[Object])],wt);let vt=class extends HTMLLIElement{constructor(e={}){super(),g(this,e)}};vt=w([p("li","web-list-item"),v("design:paramtypes",[Object])],vt);let bt=class extends HTMLOListElement{constructor(e={}){super(),g(this,e)}};bt=w([p("ol","web-ordered-list"),v("design:paramtypes",[Object])],bt);let _t=class extends HTMLUListElement{constructor(e={}){super(),g(this,e)}};_t=w([p("ul","web-unordered-list"),v("design:paramtypes",[Object])],_t);let Mt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Mt=w([p("main","web-main"),v("design:paramtypes",[Object])],Mt);let xt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};xt=w([p("mark","web-mark"),v("design:paramtypes",[Object])],xt);let Ot=class extends HTMLMenuElement{constructor(e={}){super(),g(this,e)}};Ot=w([p("menu","web-menu"),v("design:paramtypes",[Object])],Ot);let Tt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Tt=w([p("nav","web-nav"),v("design:paramtypes",[Object])],Tt);let le=class extends HTMLObjectElement{constructor(e={}){super(),g(this,e)}};le=w([p("object","web-object"),v("design:paramtypes",[le])],le);let Et=class extends HTMLParagraphElement{constructor(e={}){super(),g(this,e)}};Et=w([p("p","web-paragraph"),v("design:paramtypes",[Object])],Et);let Lt=class extends HTMLPreElement{constructor(e={}){super(),g(this,e)}};Lt=w([p("pre","web-preformatted"),v("design:paramtypes",[Object])],Lt);let Ht=class extends HTMLProgressElement{constructor(e={}){super(),g(this,e)}};Ht=w([p("progress","web-progress"),v("design:paramtypes",[Object])],Ht);let jt=class extends HTMLQuoteElement{constructor(e={}){super(),g(this,e)}};jt=w([p("blockquote","web-blockquote"),v("design:paramtypes",[Object])],jt);let St=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};St=w([p("section","web-section"),v("design:paramtypes",[Object])],St);let Pt=class extends HTMLSelectElement{constructor(e={}){super(),g(this,e)}};Pt=w([p("select","web-select"),v("design:paramtypes",[Object])],Pt);let Dt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};Dt=w([p("small","web-small"),v("design:paramtypes",[Object])],Dt);let Ct=class extends HTMLSpanElement{constructor(e={}){super(),g(this,e)}};Ct=w([p("span","web-span"),v("design:paramtypes",[Object])],Ct);let zt=class extends HTMLElement{constructor(e={}){super(),g(this,e)}};zt=w([p("strong","web-strong"),v("design:paramtypes",[Object])],zt);let kt=class extends HTMLTimeElement{constructor(e={}){super(),g(this,e)}};kt=w([p("time","web-time"),v("design:paramtypes",[Object])],kt);Zr(()=>{const t=new $({type:"file",accept:"image/svg+xml,image/png",onchange(){const[e]=t.files??[];e&&_r(e).then(r=>{D(Fr(r))})}});t.click()});const Xr=I("form.text.submit"),Yr=R("form.text.submit");Yr(async t=>{D($r(t))});var Jr=Object.defineProperty,Kr=Object.getOwnPropertyDescriptor,en=(t,e,r,o)=>{for(var a=o>1?void 0:o?Kr(e,r):e,f=t.length-1,y;f>=0;f--)(y=t[f])&&(a=(o?y(e,r,a):y(a))||a);return o&&a&&Jr(e,r,a),a};let be=class extends ve{constructor(t,e={}){super(e),this.controls=t,this.append(...Ft(this.controls))}get value(){return Lr(this)}};be=en([p("form","cf-form-group")],be);var tn=Object.defineProperty,rn=Object.getOwnPropertyDescriptor,nn=(t,e,r,o)=>{for(var a=o>1?void 0:o?rn(e,r):e,f=t.length-1,y;f>=0;f--)(y=t[f])&&(a=(o?y(e,r,a):y(a))||a);return o&&a&&tn(e,r,a),a};let _e=class extends HTMLDialogElement{constructor(e,r,o={}){super();O(this,"form");O(this,"actions");g(this,o),this.form=new be(e,{onsubmit:f=>{f.preventDefault(),D(r(this.form.value)),this.close(),this.remove()}}),this.actions={confirm:new Y({type:"submit",textContent:"Confirm"}),cancel:new Y({type:"button",textContent:"Cancel",onclick:()=>{this.close("cancel"),this.remove()}})};const a=new we;a.append(...Er(this.actions)),this.form.append(a),this.append(this.form)}connectedCallback(){setTimeout(()=>{document.addEventListener("click",e=>{const r=e.target;this.form.contains(r)||this.close()})})}};_e=nn([p("dialog","cf-form-dialog")],_e);Qr(()=>{const t=new $({type:"text",name:"text",placeholder:"Texto",required:!0}),e=new $({type:"number",name:"size",step:"0.1",value:"3.2"}),r=new $({type:"checkbox",name:"bold",value:"true",checked:!1}),o=new $({type:"color",name:"color",value:"#000000"}),a={text:t,size:e,color:o,bold:r},f=new _e(a,Xr);document.body.insertAdjacentElement("beforeend",f),f.showModal()});Br(t=>{switch(t){case"image":return D(qr());case"text":return D(Vr())}});const Rt={image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z" /> </svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"> <path d="M420-160v-520H200v-120h560v120H540v520H420Z"/> </svg>'};var Gt=Object.defineProperty,sn=Object.getOwnPropertyDescriptor,Ut=t=>{throw TypeError(t)},an=(t,e,r)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,on=(t,e,r,o)=>{for(var a=o>1?void 0:o?sn(e,r):e,f=t.length-1,y;f>=0;f--)(y=t[f])&&(a=(o?y(e,r,a):y(a))||a);return o&&a&&Gt(e,r,a),a},cn=(t,e,r)=>an(t,e+"",r),un=(t,e,r)=>e.has(t)||Ut("Cannot "+r),ln=(t,e,r)=>e.has(t)?Ut("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),It=(t,e,r)=>(un(t,e,"access private method"),r),re,Me;let xe=class extends HTMLMenuElement{constructor(){super(...arguments),ln(this,re),cn(this,"buttons",{image:It(this,re,Me).call(this,Rt.image,"image","Select image"),text:It(this,re,Me).call(this,Rt.text,"text","Write text")})}connectedCallback(){for(const t of Ft(this.buttons))this.append(t),t.addEventListener("click",()=>{const e=t.value;D(Nr(e))})}};re=new WeakSet;Me=function(t,e,r){return new Y({innerHTML:t,value:e,title:r,type:"button"})};xe=on([p("menu","cf-toolbar")],xe);const fn=()=>{const t=new xe,e=()=>Math.min(innerWidth,innerHeight);D(Ue(e())),onresize=Hr(()=>D(Ue(e())),250),root.append(t,X)};br("Mukta",[400,600,800]).then(fn);
